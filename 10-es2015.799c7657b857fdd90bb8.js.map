{"version":3,"sources":["webpack:///src/app/shared/validators/iban.validator.ts","webpack:///src/app/core/config/cases-status.ts","webpack:///src/app/core/constants/reason-cancellation.constants.ts","webpack:///src/app/core/config/address-type.ts","webpack:///src/app/core/constants/address-type.constants.ts","webpack:///src/app/cases/components/collapse-case/collapse-case.component.html","webpack:///src/app/cases/components/collapse-case/collapse-case.component.ts","webpack:///src/app/cases/pipes/filter-by-client-type.pipe.ts","webpack:///src/app/cases/cases.component.html","webpack:///src/app/cases/cases-routing.module.ts","webpack:///src/app/cases/cases.component.ts","webpack:///src/app/cases/cases.module.ts"],"names":["ibanValidator","control","value","CASES_STATUS","OPEN","IN_PROCESS","WAITING_SOLUTION","CLOSED","WATTING_RCI","CANCEL","INCOMPLETE","REASON_CANCELLATIONT","NEED_MONEY","OFFERED_BETTER_CONDITIONS","NOT_HAPPY_WITH_SERVICE","reasonCancellationtList","label","REASON_CANCELLATIONT_LIST","providedIn","factory","ADDRESS_TYPE_ENUM","FISCAL_ADDRESS","POSTAL_ADDRESS","code","name","ADDRESS_TYPES","CollapseCaseComponent","isOpen","this","open","FilterByClientTypePipe","clientType","filter","it","disableOptionFor","some","type","modalRef","routes","path","component","CasesComponent","headerService","formBuilder","caseService","dictionaryService","bsLocaleService","errorHandler","globalPositionService","modalService","accountService","casesItems","incomeSource","ReasonCancellationtList","addressTypes","streetTypes","documentsProvideTypes","documentsRequestTypes","MINLENGTH","MAXLENGTH","validationDates","minExpiration","Date","state$","createState","subs","Subscription","isProductType","newCaseMobile","showAllProducts","now","dateCustomClasses","date","classes","updateTitle","use","createForm","getCases","getProducts","getAllProducts","setStreamValues","locationList$","setLocationStream","cleanLocationCodeWhenPostalCodeChange","listenEmploymentSituationChanges","listenIbanChanges","caseForm","group","typeCase","required","category","subject","coments","maxLength","product","firstSurname","secondarySurname","email","phone","employmentSituation","cnae","disabled","cno","freelanceDateRegister","iban","reasonCancellation","cancellationTaxation","addressType","streetType","streetName","streetNumber","portal","floor","door","postalCode","locationCode","offerComunications","transferData","documentType","f","disable","typeCaseValueChange","categoryValueChange","employmentSituationValuechange","controls","add","subscribe","result","casesListOpen","item","status","casesListInProces","casesListClosed","error","showError","caseType","c","id","title","$event","setValue","caseTypeSelected","enable","get","TYPE_CASE","valueChanges","formSubmit","cleanComentsAndSubject","GEN_INFORMATION","setGenInformation","HIRING","setCustomerArea","CUSTOMER_AREA","setCancellation","CANCELLATIONS","isTrue","PRODUCT","setValidators","showProdutcSelector","clearValidators","updateValueAndValidity","IBAN","customerArea","siTrue","REASON_CANCELLATION","showCancellationsFields","CATEGORY","setNameAndSurname","NAME_AND_SURNAME","setLaboralData","LABOR_DATA","setContactPhoneMail","CONTACT_DETAILS_PHONE_MAIL","setAddress","ADDRESS_CHANGES","setPrivacyPolicyOrConsents","PRIVACY_POLICY_OR_CONSENTS","setBankAccount","BANK_ACCOUNT_CHANGES","setProvideContractualDocuments","PROVIDE_DOCUMENTS","setRequestContractualDocuments","REQUEST_CONTRACTUAL_DOCUMENTS","cancellationOfTaxation","CANCELLATION_OF_TAXATION","nameValidators","minLength","pattern","surnameValidators","a","NAME","FIRST_SURNAME","SECONDARY_SURNAME","showNameAndLastnameFields","EMPLOYMENT_SITUATION","CNAE","CNO","showLaborDataFields","EMAIL","PHONE","showPhoneAndMailFields","ADDRESS_TYPE","STREET_TYPE","STREET_NAME","STREET_NUMBER","PORTAL","FLOOR","DOOR","POSTAL_CODE","LOCATION_CODE","showAddressDataFields","OFFER_COMUNICATIONS","TRANSFER_DATA","showPolicyDataFields","showIbanFields","DOCUMENT_TYPE","showProvideDocumentsFiels","showRequestDocumentsFiels","CANCELLATION_TAXATION","showCancellationTaxationFields","SUBJECT","COMENTS","FREELANCE_DATE_REGISTER","currentCustomer$","pipe","response","switchMap","DatosPersonales","mail","products","allProductsList","productList","productsList","startWith","valid","getLocation","body","builBodyRequest","createCase","caseList","showSuccessModal","modalSucces","resetForm","recordTypeDeveloperName","description","productExtId","CONTRACTUAL_MODIF","newName","newLastName","newSecondLastName","newPhone","newEmail","emailOrPhoneAtLeastOneError","employmentStatus","CNOExtId","CNAEExtId","freelanceStartDate","provinceCode","substr","allowCommercialCommunications","allowTransferOfPersonalData","newIBAN","DOCUMENTS","document","motive","impositionNumber","reset","index","distinctUntilChanged","length","startsWith","delay","patchValue","emitEvent","combineLatest","globalPosition$","map","globalPosition","account","currentCustomer","employmentSituation$","getEmploymentStatus","cno$","getCNO","cnae$","getCNAE","touched","invalid","template","show","destroy","unsubscribe","CasesRoutingModule","forChild","CasesModule"],"mappings":"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","file":"x","sourcesContent":["import { AbstractControl } from '@angular/forms';\r\nimport * as IBAN from 'iban';\r\n\r\nexport function ibanValidator(control: AbstractControl) {\r\n  const value: string = control.value;\r\n\r\n  return IBAN.isValid(value) ? null : { 'invalid-iban': true };\r\n}\r\n","export enum CASES_STATUS {\r\n  OPEN = '1',\r\n  IN_PROCESS = '2',\r\n  WAITING_SOLUTION = '3',\r\n  CLOSED = '4',\r\n  WATTING_RCI = '5',\r\n  CANCEL = '6',\r\n  INCOMPLETE = '7',\r\n}\r\n\r\nexport type CasesStatusType =\r\n  | CASES_STATUS.OPEN\r\n  | CASES_STATUS.IN_PROCESS\r\n  | CASES_STATUS.WAITING_SOLUTION\r\n  | CASES_STATUS.CLOSED\r\n  | CASES_STATUS.WATTING_RCI\r\n  | CASES_STATUS.CANCEL\r\n  | CASES_STATUS.INCOMPLETE;\r\n","import { Option } from './../models/option';\r\nimport { InjectionToken } from '@angular/core';\r\n\r\nexport enum REASON_CANCELLATIONT {\r\n  NEED_MONEY = 1,\r\n  OFFERED_BETTER_CONDITIONS = 2,\r\n  NOT_HAPPY_WITH_SERVICE = 3,\r\n}\r\n\r\nexport type ReasonCancellationtType =\r\n  | REASON_CANCELLATIONT.NEED_MONEY\r\n  | REASON_CANCELLATIONT.OFFERED_BETTER_CONDITIONS\r\n  | REASON_CANCELLATIONT.NOT_HAPPY_WITH_SERVICE;\r\n\r\nexport const reasonCancellationtList: Option[] =  [\r\n  {\r\n    label: 'case_cancel_need_money',\r\n    value: REASON_CANCELLATIONT.NEED_MONEY,\r\n  },\r\n  {\r\n    label: 'case_cancel_offered_better_conditions',\r\n    value: REASON_CANCELLATIONT.OFFERED_BETTER_CONDITIONS,\r\n  },\r\n  {\r\n    label: 'case_cancel_not_happy_with_service',\r\n    value: REASON_CANCELLATIONT.NOT_HAPPY_WITH_SERVICE,\r\n  },\r\n];\r\n\r\nexport const REASON_CANCELLATIONT_LIST = new InjectionToken('REASON_CANCELLATIONT_LIST', {\r\n  providedIn: 'root',\r\n  factory: () => reasonCancellationtList,\r\n});\r\n","export enum ADDRESS_TYPE_ENUM {\r\n  FISCAL_ADDRESS = '01',\r\n  POSTAL_ADDRESS = '02',\r\n}\r\n\r\nexport type AddressType = ADDRESS_TYPE_ENUM.POSTAL_ADDRESS | ADDRESS_TYPE_ENUM.FISCAL_ADDRESS;\r\n","import { ADDRESS_TYPE_ENUM } from './../config/address-type';\r\nimport { InjectionToken } from '@angular/core';\r\n\r\nexport const addressTypes = [\r\n  {\r\n    code: ADDRESS_TYPE_ENUM.FISCAL_ADDRESS,\r\n    name: 'Dirección fiscal',\r\n  },\r\n  {\r\n    code: ADDRESS_TYPE_ENUM.POSTAL_ADDRESS,\r\n    name: 'Dirección postal',\r\n  }\r\n]\r\n\r\nexport type AddressTypes = typeof addressTypes;\r\n\r\nexport const ADDRESS_TYPES = new InjectionToken('ADDRESS_TYPES', {\r\n  providedIn: 'root',\r\n  factory: () => addressTypes,\r\n});\r\n","<div class=\"tabs-block--desktop__body__row\" [ngClass]=\"{ active: isOpen }\">\r\n  <div class=\"tabs-block--desktop__body__row__title\" (click)=\"open()\">\r\n    <p class=\"date\">{{ caseDate | date: 'dd/MM/yyyy' }}</p>\r\n    <p class=\"name\">{{ caseType | translate }}</p>\r\n    <span class=\"ico-arrow-3 arrow\"></span>\r\n  </div>\r\n  <div class=\"tabs-block--desktop__body__row__aditional-info\">\r\n    <p>\r\n     <b>{{'case_tab_user_description' | translate }}:</b> {{ description || 'case_tab_descriptión_empty' | translate }}\r\n    </p>\r\n    <p class=\"mt-3\" *ngIf=\"comentsBackoffice\">\r\n      <b>{{'case_tab_comments_backoffice' | translate }}:</b> {{ comentsBackoffice }}\r\n    </p>\r\n  </div>\r\n</div>\r\n","import { Component, OnInit, Input } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-collapse-case',\r\n  templateUrl: './collapse-case.component.html',\r\n  styleUrls: ['./collapse-case.component.scss'],\r\n})\r\nexport class CollapseCaseComponent implements OnInit {\r\n  @Input() caseDate: string;\r\n  @Input() caseType: string;\r\n  @Input() description: string;\r\n  @Input() comentsBackoffice?: string;\r\n  isOpen = false;\r\n  constructor() {}\r\n\r\n  ngOnInit(): void {}\r\n\r\n  open() {\r\n    this.isOpen = !this.isOpen;\r\n  }\r\n}\r\n","import { Pipe, PipeTransform } from '@angular/core';\r\nimport { CaseItemCategory } from '@core/models';\r\nimport { ClientType } from '@core/constants/client-type.constants';\r\n\r\n@Pipe({\r\n  name: 'filterByClientType',\r\n})\r\nexport class FilterByClientTypePipe implements PipeTransform {\r\n  constructor() {}\r\n\r\n  transform(value: CaseItemCategory[], clientType: ClientType) {\r\n    return value?.filter((it) => !it.disableOptionFor?.some((type) => type === clientType));\r\n  }\r\n}\r\n","<ng-container *ngIf=\"state$ | async as state\">\r\n  <div class=\"max-size cases\" *ngIf=\"state?.account\">\r\n    <div class=\"main\">\r\n      <div class=\"main-col\">\r\n        <div class=\"main__header\">\r\n          <div class=\"main__header__desktop\">\r\n            <div class=\"main__header__title\">\r\n              <div class=\"main__header__title__col\">\r\n                <h1>{{ 'case_my_cases' | translate }}</h1>\r\n                <p>{{ state.account.IBAN | formatIban }}</p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"main__body\">\r\n          <div class=\"col--2\">\r\n            <div class=\"tabs-block--desktop\">\r\n              <tabset #staticTabs>\r\n                <tab [heading]=\"'case_tab_open' | translate\">\r\n                  <app-collapse-case\r\n                    *ngFor=\"let case of casesListOpen\"\r\n                    [caseDate]=\"case.createdDate\"\r\n                    [caseType]=\"getTypeCaseTitle(case.recordTypeDeveloperName)\"\r\n                    [description]=\"case.description\"\r\n                    [comentsBackoffice]=\"case.clientComments\"\r\n                  >\r\n                  </app-collapse-case>\r\n                </tab>\r\n                <tab [heading]=\"'case_tab_in_process' | translate\">\r\n                  <app-collapse-case\r\n                    *ngFor=\"let case of casesListInProces\"\r\n                    [caseDate]=\"case.createdDate\"\r\n                    [caseType]=\"getTypeCaseTitle(case.recordTypeDeveloperName)\"\r\n                    [description]=\"case.description\"\r\n                    [comentsBackoffice]=\"case.clientComments\"\r\n                  >\r\n                  </app-collapse-case>\r\n                </tab>\r\n                <tab [heading]=\"'case_tab_closed' | translate\">\r\n                  <app-collapse-case\r\n                    *ngFor=\"let case of casesListClosed\"\r\n                    [caseDate]=\"case.createdDate\"\r\n                    [caseType]=\"getTypeCaseTitle(case.recordTypeDeveloperName)\"\r\n                    [description]=\"case.description\"\r\n                    [comentsBackoffice]=\"case.clientComments\"\r\n                  >\r\n                  </app-collapse-case>\r\n                </tab>\r\n              </tabset>\r\n            </div>\r\n            <div class=\"tabs-block--mobile\" [hidden]=\"newCaseMobile\">\r\n              <div class=\"tabs-block--mobile__section\">\r\n                <p class=\"tabs-block--mobile__title\">{{ 'case_tab_open' | translate }}</p>\r\n                <div class=\"tabs-block--mobile__body\">\r\n                  <accordion [closeOthers]=\"true\">\r\n                    <accordion-group *ngFor=\"let case of casesListOpen\">\r\n                      <div class=\"tabs-block--mobile__row\" accordion-heading>\r\n                        <p>{{ getTypeCaseTitle(case.recordTypeDeveloperName) | translate }}</p>\r\n                        <p>{{ case.createdDate | date: 'dd/MM/yyyy' }}</p>\r\n                      </div>\r\n                      <div>\r\n                        <p>\r\n                          <b>{{ 'case_tab_user_description' | translate }}:</b>\r\n                          {{ case.description || 'case_tab_descriptión_empty' | translate }}\r\n                        </p>\r\n                        <p class=\"mt-3\" *ngIf=\"case.clientComments\">\r\n                          <b>{{ 'case_tab_comments_backoffice' | translate }}:</b>\r\n                          {{ case.clientComments }}\r\n                        </p>\r\n                      </div>\r\n                    </accordion-group>\r\n                  </accordion>\r\n                </div>\r\n              </div>\r\n              <div class=\"tabs-block--mobile__section\">\r\n                <p class=\"tabs-block--mobile__title\">{{ 'case_tab_in_process' | translate }}</p>\r\n                <div class=\"tabs-block--mobile__body\">\r\n                  <accordion [closeOthers]=\"true\">\r\n                    <accordion-group *ngFor=\"let case of casesListInProces\">\r\n                      <div class=\"tabs-block--mobile__row\" accordion-heading>\r\n                        <p>{{ getTypeCaseTitle(case.recordTypeDeveloperName) | translate }}</p>\r\n                        <p>{{ case.createdDate | date: 'dd/MM/yyyy' }}</p>\r\n                      </div>\r\n                      <div>\r\n                        <p>\r\n                          <b>{{ 'case_tab_user_description' | translate }}:</b>\r\n                          {{ case.description || 'case_tab_descriptión_empty' | translate }}\r\n                        </p>\r\n                        <p class=\"mt-3\" *ngIf=\"case.clientComments\">\r\n                          <b>{{ 'case_tab_comments_backoffice' | translate }}:</b>\r\n                          {{ case.clientComments }}\r\n                        </p>\r\n                      </div>\r\n                    </accordion-group>\r\n                  </accordion>\r\n                </div>\r\n              </div>\r\n              <div class=\"tabs-block--mobile__section\">\r\n                <p class=\"tabs-block--mobile__title\">{{ 'case_tab_closed' | translate }}</p>\r\n                <div class=\"tabs-block--mobile__body\">\r\n                  <accordion [closeOthers]=\"true\">\r\n                    <accordion-group *ngFor=\"let case of casesListClosed\">\r\n                      <div class=\"tabs-block--mobile__row\" accordion-heading>\r\n                        <p>{{ getTypeCaseTitle(case.recordTypeDeveloperName) | translate }}</p>\r\n                        <p>{{ case.createdDate | date: 'dd/MM/yyyy' }}</p>\r\n                      </div>\r\n                      <div>\r\n                        <p>\r\n                          <b>{{ 'case_tab_user_description' | translate }}:</b>\r\n                          {{ case.description || 'case_tab_descriptión_empty' | translate }}\r\n                        </p>\r\n                        <p class=\"mt-3\" *ngIf=\"case.clientComments\">\r\n                          <b>{{ 'case_tab_comments_backoffice' | translate }}:</b>\r\n                          {{ case.clientComments }}\r\n                        </p>\r\n                      </div>\r\n                    </accordion-group>\r\n                  </accordion>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"col--2\">\r\n            <form\r\n              class=\"new-request\"\r\n              [formGroup]=\"caseForm\"\r\n              (submit)=\"onSubmitForm()\"\r\n              [ngClass]=\"{ show: newCaseMobile }\"\r\n            >\r\n              <button\r\n                class=\"btn--primary goback\"\r\n                [ngClass]=\"{ hidden: newCaseMobile }\"\r\n                type=\"button\"\r\n                (click)=\"showNewCasesMobile()\"\r\n              >\r\n                {{ 'case_form_goback_list' | translate }}\r\n              </button>\r\n\r\n              <div class=\"group-input new-request__title\">\r\n                <p>{{ 'case_form_new_petition' | translate }}</p>\r\n              </div>\r\n\r\n              <!-- Tipo de caso -->\r\n              <div class=\"group-input input-select\">\r\n                <ng-select\r\n                  [items]=\"casesItems\"\r\n                  [placeholder]=\"'case_form_casetype_placeholder' | translate\"\r\n                  [clearable]=\"false\"\r\n                  bindLabel=\"title\"\r\n                  bindValue=\"id\"\r\n                  formControlName=\"typeCase\"\r\n                  (change)=\"selectCaseType($event)\"\r\n                  [ngClass]=\"{ error: hasError(caseForm.get('typeCase')) }\"\r\n                >\r\n                  <ng-template ng-label-tmp let-item=\"item\">\r\n                    {{ item.title | translate }}\r\n                  </ng-template>\r\n                  <ng-template ng-option-tmp let-item=\"item\" let-index=\"index\">\r\n                    {{ item.title | translate }}\r\n                  </ng-template>\r\n                </ng-select>\r\n              </div>\r\n\r\n              <!-- Categoria o subtipo de caso -->\r\n              <div class=\"group-input input-select\">\r\n                <ng-select\r\n                  [items]=\"\r\n                    caseTypeSelected?.categories\r\n                      | filterByClientType: state.currentCustomer?.DatosPersonales?.clientType\r\n                  \"\r\n                  [placeholder]=\"'case_form_category_placeholder' | translate\"\r\n                  bindLabel=\"title\"\r\n                  bindValue=\"id\"\r\n                  [clearable]=\"false\"\r\n                  formControlName=\"category\"\r\n                  [ngClass]=\"{ error: hasError(caseForm.get('category')) }\"\r\n                >\r\n                  <ng-template ng-label-tmp let-item=\"item\">\r\n                    {{ item.title | translate }}\r\n                  </ng-template>\r\n                  <ng-template ng-option-tmp let-item=\"item\" let-index=\"index\">\r\n                    {{ item.title | translate }}\r\n                  </ng-template>\r\n                </ng-select>\r\n              </div>\r\n\r\n              <!-- Asunto -->\r\n              <div class=\"group-input input-text\">\r\n                <input\r\n                  type=\"text\"\r\n                  id=\"subject\"\r\n                  formControlName=\"subject\"\r\n                  maxlength=\"50\"\r\n                  [placeholder]=\"'case_form_subject_placeholder' | translate\"\r\n                  [ngClass]=\"{ error: hasError(caseForm.get('subject')) }\"\r\n                />\r\n              </div>\r\n\r\n              <!-- Productos -->\r\n              <div class=\"group-input input-select\" *ngIf=\"showProdutcSelector\">\r\n                <ng-select\r\n                  [items]=\"showAllProducts ? allProductsList : productsList\"\r\n                  [placeholder]=\"'case_form_product_placeholder' | translate\"\r\n                  [clearable]=\"false\"\r\n                  bindLabel=\"name\"\r\n                  bindValue=\"externalId\"\r\n                  formControlName=\"product\"\r\n                  [ngClass]=\"{ error: hasError(caseForm.get('product')) }\"\r\n                >\r\n                  <ng-template ng-label-tmp let-item=\"item\">\r\n                    {{ item.name | translate | titlecase }}\r\n                  </ng-template>\r\n                  <ng-template ng-option-tmp let-item=\"item\" let-index=\"index\">\r\n                    {{ item.name | translate | titlecase }}\r\n                  </ng-template>\r\n                </ng-select>\r\n              </div>\r\n\r\n              <div *ngIf=\"showNameAndLastnameFields\">\r\n                <!-- Nuevo nombre -->\r\n                <div class=\"group-input input-text\">\r\n                  <input\r\n                    type=\"text\"\r\n                    id=\"name\"\r\n                    formControlName=\"name\"\r\n                    maxlength=\"25\"\r\n                    [placeholder]=\"'case_form_new_name_placeholder' | translate\"\r\n                    [ngClass]=\"{ error: hasError(caseForm.get('name')) }\"\r\n                  />\r\n                </div>\r\n\r\n                <!-- Nuevo primer apellido -->\r\n                <div class=\"group-input input-text\">\r\n                  <input\r\n                    type=\"text\"\r\n                    id=\"firstSurname\"\r\n                    formControlName=\"firstSurname\"\r\n                    maxlength=\"25\"\r\n                    [placeholder]=\"'case_form_new_fistsurname_placeholder' | translate\"\r\n                    [ngClass]=\"{ error: hasError(caseForm.get('firstSurname')) }\"\r\n                  />\r\n                </div>\r\n\r\n                <!-- Nuevo segundo apellido -->\r\n                <div class=\"group-input input-text\">\r\n                  <input\r\n                    type=\"text\"\r\n                    id=\"secondarySurname\"\r\n                    formControlName=\"secondarySurname\"\r\n                    maxlength=\"25\"\r\n                    [placeholder]=\"'case_form_new_secondarysurname_placeholder' | translate\"\r\n                    [ngClass]=\"{ error: hasError(caseForm.get('secondarySurname')) }\"\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              <div *ngIf=\"showPhoneAndMailFields\">\r\n                <!-- Nuevo email -->\r\n                <div class=\"group-input input-text\">\r\n                  <input\r\n                    type=\"text\"\r\n                    id=\"email\"\r\n                    formControlName=\"email\"\r\n                    maxlength=\"50\"\r\n                    [placeholder]=\"'case_form_new_email_placeholder' | translate\"\r\n                    [ngClass]=\"{\r\n                      error: hasError(caseForm.get('email')) || emailOrPhoneAtLeastOneError\r\n                    }\"\r\n                  />\r\n                </div>\r\n\r\n                <!-- Nuevo telefono -->\r\n                <div class=\"group-input input-text\">\r\n                  <input\r\n                    type=\"text\"\r\n                    id=\"phone\"\r\n                    formControlName=\"phone\"\r\n                    maxlength=\"9\"\r\n                    [placeholder]=\"'+34' | translate\"\r\n                    [ngClass]=\"{\r\n                      error: hasError(caseForm.get('phone')) || emailOrPhoneAtLeastOneError\r\n                    }\"\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              <div *ngIf=\"showLaborDataFields\">\r\n                <!-- Situación laboral  -->\r\n                <div class=\"group-input input-select\">\r\n                  <ng-select\r\n                    [items]=\"employmentSituation$ | async\"\r\n                    [placeholder]=\"'case_form_employment_situation_placeholder' | translate\"\r\n                    bindLabel=\"name\"\r\n                    [clearable]=\"false\"\r\n                    bindValue=\"code\"\r\n                    formControlName=\"employmentSituation\"\r\n                    [ngClass]=\"{ error: hasError(caseForm.get('employmentSituation')) }\"\r\n                  >\r\n                    <ng-template ng-label-tmp let-item=\"item\">\r\n                      {{ item.name | titlecase }}\r\n                    </ng-template>\r\n                    <ng-template ng-option-tmp let-item=\"item\" let-index=\"index\">\r\n                      {{ item.name | titlecase }}\r\n                    </ng-template>\r\n                  </ng-select>\r\n                </div>\r\n\r\n                <!-- CNO -->\r\n                <div class=\"group-input input-select\">\r\n                  <ng-select\r\n                    [items]=\"cno$ | async\"\r\n                    [placeholder]=\"'case_form_activity_type_placeholder' | translate\"\r\n                    [clearable]=\"false\"\r\n                    bindLabel=\"name\"\r\n                    bindValue=\"code\"\r\n                    formControlName=\"cno\"\r\n                    [ngClass]=\"{ error: hasError(caseForm.get('cno')) }\"\r\n                  >\r\n                    <ng-template ng-label-tmp let-item=\"item\">\r\n                      {{ item.name | translate | titlecase }}\r\n                    </ng-template>\r\n                    <ng-template ng-option-tmp let-item=\"item\" let-index=\"index\">\r\n                      {{ item.name | translate | titlecase }}\r\n                    </ng-template>\r\n                  </ng-select>\r\n                </div>\r\n\r\n                <!-- CANE -->\r\n                <div class=\"group-input input-select\">\r\n                  <ng-select\r\n                    [items]=\"cnae$ | async\"\r\n                    [placeholder]=\"'case_form_professional_sector_placeholder' | translate\"\r\n                    bindLabel=\"name\"\r\n                    [clearable]=\"false\"\r\n                    bindValue=\"code\"\r\n                    formControlName=\"cnae\"\r\n                    [ngClass]=\"{ error: hasError(caseForm.get('cnae')) }\"\r\n                  >\r\n                    <ng-template ng-label-tmp let-item=\"item\">\r\n                      {{ item.name | translate | titlecase }}\r\n                    </ng-template>\r\n                    <ng-template ng-option-tmp let-item=\"item\" let-index=\"index\">\r\n                      {{ item.name | translate | titlecase }}\r\n                    </ng-template>\r\n                  </ng-select>\r\n                </div>\r\n\r\n                <!-- Nuevo Fecha alta autonomo -->\r\n                <div class=\"group-input input-text flex-column\">\r\n                  <input\r\n                    id=\"freelanceDateRegister\"\r\n                    type=\"text\"\r\n                    bsDatepicker\r\n                    [minDate]=\"\"\r\n                    [maxDate]=\"validationDates.minExpiration\"\r\n                    [bsConfig]=\"{ dateInputFormat: 'DD/MM/YYYY' }\"\r\n                    formControlName=\"freelanceDateRegister\"\r\n                    [placeholder]=\"'case_form_new_date_freelance_register' | translate\"\r\n                    [ngClass]=\"{ error: hasError(caseForm.get('freelanceDateRegister')) }\"\r\n                    [dateCustomClasses]=\"dateCustomClasses\"\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              <div *ngIf=\"showAddressDataFields\">\r\n                <!-- Tipo de via -->\r\n                <div class=\"group-input input-select\">\r\n                  <ng-select\r\n                    [items]=\"addressTypes\"\r\n                    [placeholder]=\"'case_form_new_address_type' | translate\"\r\n                    [clearable]=\"false\"\r\n                    bindLabel=\"name\"\r\n                    bindValue=\"code\"\r\n                    formControlName=\"addressType\"\r\n                    [ngClass]=\"{ error: hasError(caseForm.get('addressType')) }\"\r\n                  >\r\n                  </ng-select>\r\n                </div>\r\n\r\n                <!-- Tipo de via -->\r\n                <div class=\"group-input input-select\">\r\n                  <ng-select\r\n                    [items]=\"streetTypes\"\r\n                    [placeholder]=\"'case_form_new_street_type' | translate\"\r\n                    [clearable]=\"false\"\r\n                    bindLabel=\"name\"\r\n                    bindValue=\"code\"\r\n                    formControlName=\"streetType\"\r\n                    [ngClass]=\"{ error: hasError(caseForm.get('streetType')) }\"\r\n                  >\r\n                  </ng-select>\r\n                </div>\r\n\r\n                <!-- Nombre de la via-->\r\n                <div class=\"group-input input-text\">\r\n                  <input\r\n                    type=\"text\"\r\n                    id=\"streetName\"\r\n                    formControlName=\"streetName\"\r\n                    [ngClass]=\"{ error: hasError(caseForm.get('streetName')) }\"\r\n                    [placeholder]=\"'case_form_new_street_name' | translate\"\r\n                  />\r\n                </div>\r\n\r\n                <!-- Numero -->\r\n                <div class=\"group-input input-text\">\r\n                  <input\r\n                    type=\"text\"\r\n                    id=\"streetNumber\"\r\n                    formControlName=\"streetNumber\"\r\n                    [ngClass]=\"{ error: hasError(caseForm.get('streetNumber')) }\"\r\n                    [placeholder]=\"'case_form_new_street_number' | translate\"\r\n                  />\r\n                </div>\r\n\r\n                <!-- Portal -->\r\n                <div class=\"group-input input-text\">\r\n                  <input\r\n                    type=\"text\"\r\n                    id=\"portal\"\r\n                    formControlName=\"portal\"\r\n                    [ngClass]=\"{ error: hasError(caseForm.get('portal')) }\"\r\n                    [placeholder]=\"'case_form_new_portal' | translate\"\r\n                  />\r\n                </div>\r\n\r\n                <!-- Piso-->\r\n                <div class=\"group-input input-text\">\r\n                  <input\r\n                    type=\"text\"\r\n                    id=\"floor\"\r\n                    formControlName=\"floor\"\r\n                    [ngClass]=\"{ error: hasError(caseForm.get('floor')) }\"\r\n                    [placeholder]=\"'case_form_new_floor' | translate\"\r\n                  />\r\n                </div>\r\n\r\n                <!-- Puerta -->\r\n                <div class=\"group-input input-text\">\r\n                  <input\r\n                    type=\"text\"\r\n                    id=\"door\"\r\n                    formControlName=\"door\"\r\n                    [ngClass]=\"{ error: hasError(caseForm.get('door')) }\"\r\n                    [placeholder]=\"'case_form_new_door' | translate\"\r\n                  />\r\n                </div>\r\n\r\n                <!-- Código postal -->\r\n                <div class=\"group-input input-text\">\r\n                  <input\r\n                    type=\"text\"\r\n                    id=\"postalCode\"\r\n                    formControlName=\"postalCode\"\r\n                    [ngClass]=\"{ error: hasError(caseForm.get('postalCode')) }\"\r\n                    [placeholder]=\"'case_form_new_postal_code' | translate\"\r\n                  />\r\n                </div>\r\n\r\n                <!-- Localidad -->\r\n                <div class=\"group-input input-select\">\r\n                  <ng-select\r\n                    [items]=\"locationList$ | async\"\r\n                    [placeholder]=\"'case_form_new_location_code' | translate\"\r\n                    [clearable]=\"false\"\r\n                    bindLabel=\"locationName\"\r\n                    bindValue=\"locationCode\"\r\n                    formControlName=\"locationCode\"\r\n                    [ngClass]=\"{ error: hasError(caseForm.get('locationCode')) }\"\r\n                  >\r\n                  </ng-select>\r\n                </div>\r\n              </div>\r\n\r\n              <div *ngIf=\"showPolicyDataFields\">\r\n                <!-- Comunicaciones de ofertas -->\r\n                <div class=\"legal-conditions\">\r\n                  <div class=\"legal-conditions__text\">\r\n                    {{ 'case_form_legal_conditions_offer_comunications' | translate }}\r\n                  </div>\r\n                  <div class=\"group-input group-radio\">\r\n                    <div class=\"input-radio\">\r\n                      <input\r\n                        id=\"offerComunicationsYes\"\r\n                        name=\"offerComunications\"\r\n                        type=\"radio\"\r\n                        [value]=\"'SI'\"\r\n                        formControlName=\"offerComunications\"\r\n                      />\r\n                      <label for=\"offerComunicationsYes\">{{ 'case_from_yes' | translate }}</label>\r\n                    </div>\r\n                    <div class=\"input-radio\">\r\n                      <input\r\n                        id=\"offerComunicationsNo\"\r\n                        name=\"offerComunications\"\r\n                        type=\"radio\"\r\n                        [value]=\"'NO'\"\r\n                        formControlName=\"offerComunications\"\r\n                      />\r\n                      <label for=\"offerComunicationsNo\">{{ 'case_from_no' | translate }}</label>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                <!-- Transferencia de datos -->\r\n                <div class=\"legal-conditions\">\r\n                  <div class=\"legal-conditions__text\">\r\n                    {{ 'case_form_legal_conditions_transfer_data' | translate }}\r\n                  </div>\r\n                  <div class=\"group-input group-radio\">\r\n                    <div class=\"input-radio\">\r\n                      <input\r\n                        id=\"transferDataYes\"\r\n                        name=\"transferData\"\r\n                        type=\"radio\"\r\n                        [value]=\"'SI'\"\r\n                        formControlName=\"transferData\"\r\n                      />\r\n                      <label for=\"transferDataYes\">{{ 'case_from_yes' | translate }}</label>\r\n                    </div>\r\n                    <div class=\"input-radio\">\r\n                      <input\r\n                        id=\"transferDataNo\"\r\n                        name=\"transferData\"\r\n                        type=\"radio\"\r\n                        [value]=\"'NO'\"\r\n                        formControlName=\"transferData\"\r\n                      />\r\n                      <label for=\"transferDataNo\">{{ 'case_from_no' | translate }}</label>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <!-- Proveer documentcion -->\r\n              <div class=\"group-input input-select\">\r\n                <ng-select\r\n                  [items]=\"documentsProvideTypes\"\r\n                  [clearable]=\"false\"\r\n                  *ngIf=\"showProvideDocumentsFiels\"\r\n                  [placeholder]=\"'case_form_new_document_type' | translate\"\r\n                  bindLabel=\"name\"\r\n                  bindValue=\"code\"\r\n                  formControlName=\"documentType\"\r\n                  [ngClass]=\"{ error: hasError(caseForm.get('documentType')) }\"\r\n                >\r\n                </ng-select>\r\n              </div>\r\n\r\n              <!-- Solicitar documentcion -->\r\n              <div class=\"group-input input-select\" *ngIf=\"showRequestDocumentsFiels\">\r\n                <ng-select\r\n                  [items]=\"documentsRequestTypes\"\r\n                  [placeholder]=\"'case_form_new_document_type' | translate\"\r\n                  [clearable]=\"false\"\r\n                  bindLabel=\"name\"\r\n                  bindValue=\"code\"\r\n                  formControlName=\"documentType\"\r\n                  [ngClass]=\"{ error: hasError(caseForm.get('documentType')) }\"\r\n                >\r\n                </ng-select>\r\n              </div>\r\n\r\n              <!-- IBAN -->\r\n              <div\r\n                class=\"group-input input-text\"\r\n                *ngIf=\"showIbanFields || showCancellationsFields || customerArea\"\r\n              >\r\n                <input\r\n                  appFormatIban\r\n                  type=\"text\"\r\n                  id=\"iban\"\r\n                  formControlName=\"iban\"\r\n                  placeholder=\"IBAN\"\r\n                  [ngClass]=\"{ error: hasError(caseForm.get('iban')) }\"\r\n                />\r\n              </div>\r\n\r\n              <!-- Motivo cancelacion -->\r\n              <div class=\"group-input input-select\" *ngIf=\"showCancellationsFields\">\r\n                <ng-select\r\n                  [items]=\"ReasonCancellationtList\"\r\n                  [clearable]=\"false\"\r\n                  [placeholder]=\"'case_form_reason_cancellationt_placeholder' | translate\"\r\n                  bindLabel=\"label\"\r\n                  bindValue=\"value\"\r\n                  formControlName=\"reasonCancellation\"\r\n                  [ngClass]=\"{ error: hasError(caseForm.get('reasonCancellation')) }\"\r\n                >\r\n                  <ng-template ng-label-tmp let-item=\"item\">\r\n                    {{ item.label | translate }}\r\n                  </ng-template>\r\n                  <ng-template ng-option-tmp let-item=\"item\" let-index=\"index\">\r\n                    {{ item.label | translate }}\r\n                  </ng-template>\r\n                </ng-select>\r\n              </div>\r\n\r\n              <!--Nº de imposición (Cancelacion) -->\r\n              <div class=\"group-input input-text\" *ngIf=\"showCancellationTaxationFields\">\r\n                <input\r\n                  type=\"text\"\r\n                  id=\"cancellationTaxation\"\r\n                  formControlName=\"cancellationTaxation\"\r\n                  maxlength=\"50\"\r\n                  [placeholder]=\"'case_form_cancellation_taxation_placeholder' | translate\"\r\n                  [ngClass]=\"{ error: hasError(caseForm.get('cancellationTaxation')) }\"\r\n                />\r\n              </div>\r\n\r\n              <!-- Comentarios de usuario -->\r\n              <div class=\"group-input textarea\">\r\n                <label for=\"comments\">{{ 'case_form_coments' | translate }}</label>\r\n                <textarea\r\n                  name=\"comments\"\r\n                  id=\"comments\"\r\n                  formControlName=\"coments\"\r\n                  [placeholder]=\"'case_from_coments_placeholder' | translate\"\r\n                  [ngClass]=\"{ error: hasError(caseForm.get('coments')) }\"\r\n                ></textarea>\r\n              </div>\r\n\r\n              <div class=\"group-button\">\r\n                <button class=\"btn--primary-small\" type=\"submit\">\r\n                  {{ 'case_btn_send' | translate }}\r\n                </button>\r\n              </div>\r\n            </form>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"main__button\">\r\n          <button\r\n            class=\"btn--primary\"\r\n            [ngClass]=\"{ hidden: newCaseMobile }\"\r\n            type=\"button\"\r\n            (click)=\"showNewCasesMobile()\"\r\n          >\r\n            {{ 'case_form_new_petition' | translate }}\r\n          </button>\r\n\r\n          <button\r\n            class=\"btn--primary\"\r\n            [ngClass]=\"{ hidden: !newCaseMobile }\"\r\n            type=\"button\"\r\n            (click)=\"onSubmitForm()\"\r\n          >\r\n            {{ 'case_btn_send' | translate }}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <ng-template #modalSucces>\r\n    <app-info-modal\r\n      head=\"case_modal_succes_title\"\r\n      description=\"case_modal_success_description\"\r\n      type=\"success\"\r\n      (hide)=\"modalRef.hide()\"\r\n    >\r\n    </app-info-modal>\r\n  </ng-template>\r\n</ng-container>\r\n","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\nimport { CasesComponent } from './cases.component';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: CasesComponent,\r\n  },\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class CasesRoutingModule {}\r\n","import { AddressType } from './../core/config/address-type';\r\nimport { HeaderService } from '@core/services/header/header.service';\r\nimport { CASE_DOCUMENTS } from './../core/config/sub-cases';\r\nimport {\r\n  DocumentsTypes,\r\n  DOCUMENTS_PROVIDE_TYPES,\r\n  DOCUMENTS_REQUEST_TYPES,\r\n} from '@core/constants/documents-types.constants';\r\nimport { CASE_CANCELLATIONS } from '@core/config/sub-cases';\r\nimport { Option } from '@core/models/option';\r\nimport { CasePayload } from '@api/models/case-payload.model';\r\nimport { DictionaryService } from '@core/services/dictionary/dictionary.service';\r\nimport { CaseType, CASES } from '@core/config/cases';\r\nimport { Case } from '@api/models/case.model';\r\nimport { CaseService } from '@core/services/case/case.service';\r\nimport { Component, OnInit, Inject, OnDestroy, ViewChild, TemplateRef } from '@angular/core';\r\nimport { FormGroup, FormBuilder, Validators, AbstractControl } from '@angular/forms';\r\nimport { Subscription, Observable, combineLatest } from 'rxjs';\r\nimport { ResponseAvailableProductProductList } from '@api/models/responseAvailableProductProductList';\r\nimport {\r\n  alphabeticRegExp,\r\n  emailRegExp,\r\n  spanishPhoneRegExp,\r\n  spanishPostalCodeRegExp,\r\n  nameAlphabeticRegExp,\r\n} from '@shared/utils';\r\nimport { noWhiteSpaceValidator } from '@shared/validators';\r\nimport { Cnogroupcnocnae } from '@api/models/cnogroupCnoCnae';\r\nimport {\r\n  IncomeSource,\r\n  INCOME_SOURCE,\r\n  CASES_ITEMS,\r\n  STREET_TYPES,\r\n  StreetTypes,\r\n} from '@core/constants';\r\nimport {\r\n  distinctUntilChanged,\r\n  filter,\r\n  delay,\r\n  startWith,\r\n  switchMap,\r\n  map,\r\n  tap,\r\n} from 'rxjs/operators';\r\nimport { ibanValidator } from '@shared/validators/iban.validator';\r\nimport { CASE_CONTRACTUAL_MODIF } from '@core/config/sub-cases';\r\nimport { CASES_STATUS } from '@core/config/cases-status';\r\nimport { FORM_CASE } from '@core/config/form-case';\r\nimport { REASON_CANCELLATIONT_LIST } from '@core/constants/reason-cancellation.constants';\r\nimport { CaseItem } from '@core/models';\r\nimport { DatepickerDateCustomClasses, BsLocaleService } from 'ngx-bootstrap/datepicker';\r\nimport { AddressLocation } from '@api/models/addressLocation';\r\nimport { ErrorHandlerService } from '@core/services/errors/error-handler.service';\r\nimport { GlobalPositionService } from '@core/services/global-position/global-position.service';\r\nimport { findAccount, findDeposit } from '@core/utils';\r\nimport { formatDate } from '@angular/common';\r\nimport { BsModalService, BsModalRef } from 'ngx-bootstrap/modal';\r\nimport { ADDRESS_TYPES } from '@core/constants/address-type.constants';\r\nimport { AccountService } from '@core/services/account/account.service';\r\n\r\n@Component({\r\n  selector: 'app-cases',\r\n  templateUrl: './cases.component.html',\r\n  styles: [],\r\n})\r\nexport class CasesComponent implements OnInit, OnDestroy {\r\n  @ViewChild('modalSucces', { static: false }) modalSucces: TemplateRef<any>;\r\n  modalRef: BsModalRef;\r\n  // Constants\r\n  readonly MINLENGTH = 3;\r\n  readonly MAXLENGTH = 25;\r\n  readonly validationDates = {\r\n    minExpiration: new Date(),\r\n  } as const;\r\n  dateCustomClasses: DatepickerDateCustomClasses[];\r\n\r\n  state$ = this.createState();\r\n\r\n  private subs = new Subscription();\r\n  casesListOpen: Case[];\r\n  casesListInProces: Case[];\r\n  casesListClosed: Case[];\r\n  caseTypeSelected: CaseItem;\r\n  caseSelected: any;\r\n  isProductType = false;\r\n  caseForm: FormGroup;\r\n  allProductsList: ResponseAvailableProductProductList[];\r\n  productsList: ResponseAvailableProductProductList[];\r\n  employmentSituation$: Observable<Cnogroupcnocnae[]>;\r\n  cno$: Observable<Cnogroupcnocnae[]>;\r\n  cnae$: Observable<Cnogroupcnocnae[]>;\r\n  locationList$: Observable<AddressLocation[]>;\r\n  showProdutcSelector: boolean;\r\n  showNameAndLastnameFields: boolean;\r\n  showPhoneAndMailFields: boolean;\r\n  showIbanFields: boolean;\r\n  showLaborDataFields: boolean;\r\n  showCancellationsFields: boolean;\r\n  showCancellationTaxationFields: boolean;\r\n  showAddressDataFields: boolean;\r\n  showPolicyDataFields: boolean;\r\n  showProvideDocumentsFiels: boolean;\r\n  showRequestDocumentsFiels: boolean;\r\n  customerArea: boolean;\r\n  formSubmit: boolean;\r\n  newCaseMobile = false;\r\n  showAllProducts = false;\r\n\r\n  constructor(\r\n    private headerService: HeaderService,\r\n    private formBuilder: FormBuilder,\r\n    private caseService: CaseService,\r\n    private dictionaryService: DictionaryService,\r\n    private bsLocaleService: BsLocaleService,\r\n    private errorHandler: ErrorHandlerService,\r\n    private globalPositionService: GlobalPositionService,\r\n    private modalService: BsModalService,\r\n    private accountService: AccountService,\r\n    @Inject(CASES_ITEMS) public casesItems: CaseItem[],\r\n    @Inject(INCOME_SOURCE) public incomeSource: IncomeSource,\r\n    @Inject(REASON_CANCELLATIONT_LIST) public ReasonCancellationtList: Option[],\r\n    @Inject(ADDRESS_TYPES) public addressTypes: AddressType,\r\n    @Inject(STREET_TYPES) public streetTypes: StreetTypes,\r\n    @Inject(DOCUMENTS_PROVIDE_TYPES) public documentsProvideTypes: DocumentsTypes,\r\n    @Inject(DOCUMENTS_REQUEST_TYPES) public documentsRequestTypes: DocumentsTypes\r\n  ) {\r\n    const now = new Date();\r\n    this.dateCustomClasses = [{ date: now, classes: [] }];\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.headerService.updateTitle('menu_requests');\r\n    this.bsLocaleService.use('es');\r\n    this.createForm();\r\n    this.getCases();\r\n    this.getProducts();\r\n    this.getAllProducts();\r\n    this.setStreamValues();\r\n    this.locationList$ = this.setLocationStream();\r\n    this.cleanLocationCodeWhenPostalCodeChange();\r\n    this.listenEmploymentSituationChanges();\r\n    this.listenIbanChanges();\r\n  }\r\n\r\n  private createForm() {\r\n    this.caseForm = this.formBuilder.group({\r\n      typeCase: [null, Validators.required],\r\n      category: [null, Validators.required],\r\n      subject: [null, Validators.required],\r\n      coments: [null, [Validators.required, Validators.maxLength(1000)]],\r\n      product: [null],\r\n      name: [null],\r\n      firstSurname: [null],\r\n      secondarySurname: [null],\r\n      email: [null],\r\n      phone: [null],\r\n      employmentSituation: [null],\r\n      cnae: [{ value: null, disabled: true }],\r\n      cno: [{ value: null, disabled: true }],\r\n      freelanceDateRegister: [{ value: null, disabled: true }],\r\n      iban: [null],\r\n      reasonCancellation: [null],\r\n      cancellationTaxation: [null],\r\n      addressType: [null],\r\n      streetType: [null],\r\n      streetName: [null],\r\n      streetNumber: [null],\r\n      portal: [null],\r\n      floor: [null],\r\n      door: [null],\r\n      postalCode: [null],\r\n      locationCode: [null],\r\n      offerComunications: [null],\r\n      transferData: [null],\r\n      documentType: [null],\r\n    });\r\n\r\n    this.f.category.disable();\r\n    this.typeCaseValueChange();\r\n    this.categoryValueChange();\r\n    this.employmentSituationValuechange();\r\n  }\r\n\r\n  get f() {\r\n    return this.caseForm.controls;\r\n  }\r\n\r\n  private getCases() {\r\n    this.subs.add(\r\n      this.caseService.getCases().subscribe(\r\n        (result) => {\r\n          this.casesListOpen = result\r\n            ? result.filter((item) => item.status === CASES_STATUS.OPEN)\r\n            : [];\r\n          this.casesListInProces = result\r\n            ? result.filter(\r\n                (item) =>\r\n                  item.status !== CASES_STATUS.OPEN &&\r\n                  item.status !== CASES_STATUS.CLOSED &&\r\n                  item.status !== CASES_STATUS.CANCEL\r\n              )\r\n            : [];\r\n          this.casesListClosed = result\r\n            ? result.filter(\r\n                (item) => item.status === CASES_STATUS.CLOSED || item.status === CASES_STATUS.CANCEL\r\n              )\r\n            : [];\r\n        },\r\n        (error) => {\r\n          this.errorHandler.showError(error);\r\n        }\r\n      )\r\n    );\r\n  }\r\n\r\n  getTypeCaseTitle(caseType: CaseType) {\r\n    const itmCase = this.casesItems.filter((c) => c.id === caseType)[0];\r\n    return itmCase.title;\r\n  }\r\n\r\n  selectCaseType($event) {\r\n    this.f.category.setValue(null);\r\n    if ($event) {\r\n      this.caseTypeSelected = this.casesItems.filter((c) => c.id === this.f.typeCase.value)[0];\r\n      this.f.category.enable();\r\n    } else {\r\n      this.f.category.disable();\r\n    }\r\n  }\r\n\r\n  private typeCaseValueChange() {\r\n    this.caseForm.get(FORM_CASE.TYPE_CASE).valueChanges.subscribe((value) => {\r\n      this.formSubmit = false;\r\n      this.cleanComentsAndSubject();\r\n      this.showAllProducts = value === CASES.GEN_INFORMATION;\r\n      this.setGenInformation(value === CASES.GEN_INFORMATION || value === CASES.HIRING);\r\n      this.setCustomerArea(value === CASES.CUSTOMER_AREA);\r\n      this.setCancellation(value === CASES.CANCELLATIONS);\r\n    });\r\n  }\r\n\r\n  private setGenInformation(isTrue: boolean) {\r\n    if (isTrue) {\r\n      this.caseForm.get(FORM_CASE.PRODUCT).setValue(null);\r\n      this.caseForm.get(FORM_CASE.PRODUCT).setValidators([Validators.required]);\r\n      this.showProdutcSelector = true;\r\n    } else {\r\n      this.caseForm.get(FORM_CASE.PRODUCT).setValue(null);\r\n      this.caseForm.get(FORM_CASE.PRODUCT).clearValidators();\r\n      this.showProdutcSelector = false;\r\n    }\r\n    this.caseForm.get(FORM_CASE.PRODUCT).updateValueAndValidity();\r\n  }\r\n\r\n  private setCustomerArea(isTrue: boolean) {\r\n    if (isTrue) {\r\n      this.caseForm.get(FORM_CASE.IBAN).setValidators([Validators.required, ibanValidator]);\r\n      this.customerArea = true;\r\n    } else {\r\n      this.caseForm.get(FORM_CASE.IBAN).setValue(null);\r\n      this.caseForm.get(FORM_CASE.IBAN).clearValidators();\r\n      this.customerArea = false;\r\n    }\r\n    this.caseForm.get(FORM_CASE.IBAN).updateValueAndValidity();\r\n  }\r\n\r\n  private setCancellation(siTrue: boolean) {\r\n    if (siTrue) {\r\n      this.caseForm.get(FORM_CASE.IBAN).setValidators([Validators.required, ibanValidator]);\r\n      this.caseForm.get(FORM_CASE.REASON_CANCELLATION).setValidators([Validators.required]);\r\n      this.showCancellationsFields = true;\r\n    } else {\r\n      this.caseForm.get(FORM_CASE.IBAN).setValue(null);\r\n      this.caseForm.get(FORM_CASE.REASON_CANCELLATION).setValue(null);\r\n      this.caseForm.get(FORM_CASE.IBAN).clearValidators();\r\n      this.caseForm.get(FORM_CASE.REASON_CANCELLATION).clearValidators();\r\n      this.showCancellationsFields = false;\r\n    }\r\n    this.caseForm.get(FORM_CASE.REASON_CANCELLATION).updateValueAndValidity();\r\n  }\r\n\r\n  private categoryValueChange() {\r\n    this.caseForm.get(FORM_CASE.CATEGORY).valueChanges.subscribe((value) => {\r\n      this.formSubmit = false;\r\n      this.cleanComentsAndSubject();\r\n      // Nombre y Apellidos\r\n      this.setNameAndSurname(value === CASE_CONTRACTUAL_MODIF.NAME_AND_SURNAME);\r\n      // Datos laborales\r\n      this.setLaboralData(value === CASE_CONTRACTUAL_MODIF.LABOR_DATA);\r\n      // Datos de contacto (tfno/mail)\r\n      this.setContactPhoneMail(value === CASE_CONTRACTUAL_MODIF.CONTACT_DETAILS_PHONE_MAIL);\r\n      // Cambios direccion\r\n      this.setAddress(value === CASE_CONTRACTUAL_MODIF.ADDRESS_CHANGES);\r\n      // Cambios politicas de cocentimiento\r\n      this.setPrivacyPolicyOrConsents(value === CASE_CONTRACTUAL_MODIF.PRIVACY_POLICY_OR_CONSENTS);\r\n      // Cambios Cta Bancaria\r\n      this.setBankAccount(value === CASE_CONTRACTUAL_MODIF.BANK_ACCOUNT_CHANGES);\r\n      // Aportar docuementacion\r\n      this.setProvideContractualDocuments(value === CASE_DOCUMENTS.PROVIDE_DOCUMENTS);\r\n      // Solicitar docuementacion\r\n      this.setRequestContractualDocuments(value === CASE_DOCUMENTS.REQUEST_CONTRACTUAL_DOCUMENTS);\r\n      // Cancelaciones\r\n      this.cancellationOfTaxation(value === CASE_CANCELLATIONS.CANCELLATION_OF_TAXATION);\r\n    });\r\n  }\r\n\r\n  private setNameAndSurname(isTrue: boolean) {\r\n    const nameValidators = [\r\n      Validators.minLength(this.MINLENGTH),\r\n      Validators.maxLength(this.MAXLENGTH),\r\n      Validators.pattern(nameAlphabeticRegExp),\r\n      noWhiteSpaceValidator,\r\n    ];\r\n    const surnameValidators = [\r\n      Validators.minLength(this.MINLENGTH),\r\n      Validators.maxLength(this.MAXLENGTH),\r\n      Validators.pattern(alphabeticRegExp),\r\n      noWhiteSpaceValidator,\r\n    ];\r\n\r\n    if (isTrue) {\r\n      this.caseForm.get(FORM_CASE.NAME).setValidators([Validators.required, ...nameValidators]);\r\n      this.caseForm\r\n        .get(FORM_CASE.FIRST_SURNAME)\r\n        .setValidators([Validators.required, ...surnameValidators]);\r\n      this.caseForm.get(FORM_CASE.SECONDARY_SURNAME).setValidators([...surnameValidators]);\r\n      this.showNameAndLastnameFields = true;\r\n    } else {\r\n      this.caseForm.get(FORM_CASE.NAME).setValue(null);\r\n      this.caseForm.get(FORM_CASE.FIRST_SURNAME).setValue(null);\r\n      this.caseForm.get(FORM_CASE.SECONDARY_SURNAME).setValue(null);\r\n      this.caseForm.get(FORM_CASE.NAME).clearValidators();\r\n      this.caseForm.get(FORM_CASE.FIRST_SURNAME).clearValidators();\r\n      this.caseForm.get(FORM_CASE.SECONDARY_SURNAME).clearValidators();\r\n      this.showNameAndLastnameFields = false;\r\n    }\r\n\r\n    this.caseForm.get(FORM_CASE.NAME).updateValueAndValidity();\r\n    this.caseForm.get(FORM_CASE.FIRST_SURNAME).updateValueAndValidity();\r\n    this.caseForm.get(FORM_CASE.SECONDARY_SURNAME).updateValueAndValidity();\r\n  }\r\n\r\n  private setLaboralData(isTrue: boolean) {\r\n    if (isTrue) {\r\n      this.caseForm.get(FORM_CASE.EMPLOYMENT_SITUATION).setValidators([Validators.required]);\r\n      this.caseForm.get(FORM_CASE.CNAE).setValidators([Validators.required]);\r\n      this.caseForm.get(FORM_CASE.CNO).setValidators([Validators.required]);\r\n      this.showLaborDataFields = true;\r\n    } else {\r\n      this.caseForm.get(FORM_CASE.EMPLOYMENT_SITUATION).setValue(null);\r\n      this.caseForm.get(FORM_CASE.CNAE).setValue(null);\r\n      this.caseForm.get(FORM_CASE.CNO).setValue(null);\r\n      this.caseForm.get(FORM_CASE.EMPLOYMENT_SITUATION).clearValidators();\r\n      this.caseForm.get(FORM_CASE.CNAE).clearValidators();\r\n      this.caseForm.get(FORM_CASE.CNO).clearValidators();\r\n      this.showLaborDataFields = false;\r\n    }\r\n    this.caseForm.get(FORM_CASE.EMPLOYMENT_SITUATION).updateValueAndValidity();\r\n    this.caseForm.get(FORM_CASE.CNAE).updateValueAndValidity();\r\n    this.caseForm.get(FORM_CASE.CNO).updateValueAndValidity();\r\n  }\r\n\r\n  private setContactPhoneMail(isTrue: boolean) {\r\n    if (isTrue) {\r\n      this.caseForm\r\n        .get(FORM_CASE.EMAIL)\r\n        .setValidators([Validators.pattern(emailRegExp), noWhiteSpaceValidator]);\r\n      this.caseForm\r\n        .get(FORM_CASE.PHONE)\r\n        .setValidators([Validators.pattern(spanishPhoneRegExp), noWhiteSpaceValidator]);\r\n      this.showPhoneAndMailFields = true;\r\n    } else {\r\n      this.caseForm.get(FORM_CASE.EMAIL).setValue(null);\r\n      this.caseForm.get(FORM_CASE.PHONE).setValue(null);\r\n      this.caseForm.get(FORM_CASE.EMAIL).clearValidators();\r\n      this.caseForm.get(FORM_CASE.PHONE).clearValidators();\r\n      this.showPhoneAndMailFields = false;\r\n    }\r\n    this.caseForm.get(FORM_CASE.EMAIL).updateValueAndValidity();\r\n    this.caseForm.get(FORM_CASE.PHONE).updateValueAndValidity();\r\n  }\r\n\r\n  private setAddress(isTrue: boolean) {\r\n    if (isTrue) {\r\n      this.caseForm.get(FORM_CASE.ADDRESS_TYPE).setValidators([Validators.required]);\r\n      this.caseForm.get(FORM_CASE.STREET_TYPE).setValidators([Validators.required]);\r\n      this.caseForm\r\n        .get(FORM_CASE.STREET_NAME)\r\n        .setValidators([\r\n          Validators.required,\r\n          Validators.minLength(3),\r\n          Validators.maxLength(200),\r\n          noWhiteSpaceValidator,\r\n        ]);\r\n      this.caseForm\r\n        .get(FORM_CASE.STREET_NUMBER)\r\n        .setValidators([Validators.maxLength(4), noWhiteSpaceValidator]);\r\n      this.caseForm\r\n        .get(FORM_CASE.PORTAL)\r\n        .setValidators([Validators.maxLength(2), noWhiteSpaceValidator]);\r\n      this.caseForm\r\n        .get(FORM_CASE.FLOOR)\r\n        .setValidators([Validators.maxLength(4), noWhiteSpaceValidator]);\r\n      this.caseForm\r\n        .get(FORM_CASE.DOOR)\r\n        .setValidators([Validators.maxLength(9), noWhiteSpaceValidator]);\r\n      this.caseForm\r\n        .get(FORM_CASE.POSTAL_CODE)\r\n        .setValidators([\r\n          Validators.required,\r\n          Validators.pattern(spanishPostalCodeRegExp),\r\n          Validators.maxLength(5),\r\n          Validators.minLength(5),\r\n          noWhiteSpaceValidator,\r\n        ]);\r\n      this.caseForm.get(FORM_CASE.LOCATION_CODE).setValidators([Validators.required]);\r\n      this.showAddressDataFields = true;\r\n    } else {\r\n      this.caseForm.get(FORM_CASE.ADDRESS_TYPE).setValue(null);\r\n      this.caseForm.get(FORM_CASE.STREET_TYPE).setValue(null);\r\n      this.caseForm.get(FORM_CASE.STREET_NAME).setValue(null);\r\n      this.caseForm.get(FORM_CASE.STREET_NUMBER).setValue(null);\r\n      this.caseForm.get(FORM_CASE.PORTAL).setValue(null);\r\n      this.caseForm.get(FORM_CASE.FLOOR).setValue(null);\r\n      this.caseForm.get(FORM_CASE.DOOR).setValue(null);\r\n      this.caseForm.get(FORM_CASE.POSTAL_CODE).setValue(null);\r\n      this.caseForm.get(FORM_CASE.LOCATION_CODE).setValue(null);\r\n      this.caseForm.get(FORM_CASE.STREET_TYPE).clearValidators();\r\n      this.caseForm.get(FORM_CASE.STREET_NAME).clearValidators();\r\n      this.caseForm.get(FORM_CASE.STREET_NUMBER).clearValidators();\r\n      this.caseForm.get(FORM_CASE.PORTAL).clearValidators();\r\n      this.caseForm.get(FORM_CASE.FLOOR).clearValidators();\r\n      this.caseForm.get(FORM_CASE.DOOR).clearValidators();\r\n      this.caseForm.get(FORM_CASE.POSTAL_CODE).clearValidators();\r\n      this.caseForm.get(FORM_CASE.LOCATION_CODE).clearValidators();\r\n      this.showAddressDataFields = false;\r\n    }\r\n\r\n    this.caseForm.get(FORM_CASE.ADDRESS_TYPE).updateValueAndValidity();\r\n    this.caseForm.get(FORM_CASE.STREET_TYPE).updateValueAndValidity();\r\n    this.caseForm.get(FORM_CASE.STREET_NAME).updateValueAndValidity();\r\n    this.caseForm.get(FORM_CASE.STREET_NUMBER).updateValueAndValidity();\r\n    this.caseForm.get(FORM_CASE.PORTAL).updateValueAndValidity();\r\n    this.caseForm.get(FORM_CASE.FLOOR).updateValueAndValidity();\r\n    this.caseForm.get(FORM_CASE.DOOR).updateValueAndValidity();\r\n    this.caseForm.get(FORM_CASE.POSTAL_CODE).updateValueAndValidity();\r\n    this.caseForm.get(FORM_CASE.LOCATION_CODE).updateValueAndValidity();\r\n  }\r\n\r\n  private setPrivacyPolicyOrConsents(isTrue: boolean) {\r\n    if (isTrue) {\r\n      this.caseForm.get(FORM_CASE.OFFER_COMUNICATIONS).setValidators([Validators.required]);\r\n      this.caseForm.get(FORM_CASE.TRANSFER_DATA).setValidators([Validators.required]);\r\n      this.showPolicyDataFields = true;\r\n    } else {\r\n      this.caseForm.get(FORM_CASE.OFFER_COMUNICATIONS).setValue(null);\r\n      this.caseForm.get(FORM_CASE.TRANSFER_DATA).setValue(null);\r\n      this.caseForm.get(FORM_CASE.OFFER_COMUNICATIONS).clearValidators();\r\n      this.caseForm.get(FORM_CASE.TRANSFER_DATA).clearValidators();\r\n      this.showPolicyDataFields = false;\r\n    }\r\n    this.caseForm.get(FORM_CASE.OFFER_COMUNICATIONS).updateValueAndValidity();\r\n    this.caseForm.get(FORM_CASE.TRANSFER_DATA).updateValueAndValidity();\r\n  }\r\n\r\n  private setBankAccount(isTrue: boolean) {\r\n    if (isTrue) {\r\n      this.caseForm.get(FORM_CASE.IBAN).setValidators([Validators.required, ibanValidator]);\r\n      this.showIbanFields = true;\r\n    } else {\r\n      this.caseForm.get(FORM_CASE.IBAN).setValue(null);\r\n      this.caseForm.get(FORM_CASE.IBAN).clearValidators();\r\n      this.showIbanFields = false;\r\n    }\r\n    this.caseForm.get(FORM_CASE.IBAN).updateValueAndValidity();\r\n  }\r\n\r\n  private setProvideContractualDocuments(isTrue: boolean) {\r\n    if (isTrue) {\r\n      this.caseForm.get(FORM_CASE.DOCUMENT_TYPE).setValidators([Validators.required]);\r\n      this.showProvideDocumentsFiels = true;\r\n    } else {\r\n      this.caseForm.get(FORM_CASE.DOCUMENT_TYPE).setValue(null);\r\n      this.caseForm.get(FORM_CASE.DOCUMENT_TYPE).clearValidators();\r\n      this.showProvideDocumentsFiels = false;\r\n    }\r\n    this.caseForm.get(FORM_CASE.DOCUMENT_TYPE);\r\n  }\r\n\r\n  private setRequestContractualDocuments(isTrue: boolean) {\r\n    if (isTrue) {\r\n      this.caseForm.get(FORM_CASE.DOCUMENT_TYPE).setValidators([Validators.required]);\r\n      this.showRequestDocumentsFiels = true;\r\n    } else {\r\n      this.caseForm.get(FORM_CASE.DOCUMENT_TYPE).setValue(null);\r\n      this.caseForm.get(FORM_CASE.DOCUMENT_TYPE).clearValidators();\r\n      this.showRequestDocumentsFiels = false;\r\n    }\r\n    this.caseForm.get(FORM_CASE.DOCUMENT_TYPE);\r\n  }\r\n\r\n  private cancellationOfTaxation(isTrue: boolean) {\r\n    if (isTrue) {\r\n      this.caseForm.get(FORM_CASE.CANCELLATION_TAXATION).setValidators([Validators.required]);\r\n      this.showCancellationTaxationFields = true;\r\n    } else {\r\n      this.caseForm.get(FORM_CASE.CANCELLATION_TAXATION).setValue(null);\r\n      this.caseForm.get(FORM_CASE.CANCELLATION_TAXATION).clearValidators();\r\n      this.showCancellationTaxationFields = false;\r\n    }\r\n    this.caseForm.get(FORM_CASE.CANCELLATION_TAXATION).updateValueAndValidity();\r\n  }\r\n\r\n  private cleanComentsAndSubject() {\r\n    this.caseForm.get(FORM_CASE.SUBJECT).setValue(null);\r\n    this.caseForm.get(FORM_CASE.SUBJECT).updateValueAndValidity();\r\n    this.caseForm.get(FORM_CASE.COMENTS).setValue(null);\r\n    this.caseForm.get(FORM_CASE.COMENTS).updateValueAndValidity();\r\n  }\r\n\r\n  get emailOrPhoneAtLeastOneError() {\r\n    const validMail = this.f.email.value === null || this.f.email.value === '';\r\n    const validPhone = this.f.phone.value === null || this.f.phone.value === '';\r\n    return this.formSubmit && validMail && validPhone;\r\n  }\r\n\r\n  private employmentSituationValuechange() {\r\n    this.caseForm.get(FORM_CASE.EMPLOYMENT_SITUATION).valueChanges.subscribe((value) => {\r\n      if (value === '01' || value === '02') {\r\n        this.caseForm.get(FORM_CASE.CNAE).setValidators([Validators.required]);\r\n        this.caseForm.get(FORM_CASE.CNO).setValidators([Validators.required]);\r\n      } else {\r\n        this.caseForm.get(FORM_CASE.CNAE).setValue(null);\r\n        this.caseForm.get(FORM_CASE.CNO).setValue(null);\r\n        this.caseForm.get(FORM_CASE.CNAE).clearValidators();\r\n        this.caseForm.get(FORM_CASE.CNO).clearValidators();\r\n      }\r\n      if (value === '02') {\r\n        this.caseForm.get(FORM_CASE.FREELANCE_DATE_REGISTER).enable();\r\n      } else {\r\n        this.caseForm.get(FORM_CASE.FREELANCE_DATE_REGISTER).setValue(null);\r\n        this.caseForm.get(FORM_CASE.FREELANCE_DATE_REGISTER).disable();\r\n      }\r\n      this.caseForm.get(FORM_CASE.CNAE).updateValueAndValidity();\r\n      this.caseForm.get(FORM_CASE.CNO).updateValueAndValidity();\r\n      this.caseForm.get(FORM_CASE.FREELANCE_DATE_REGISTER).updateValueAndValidity();\r\n    });\r\n  }\r\n\r\n  private getAllProducts() {\r\n    this.subs.add(\r\n      this.accountService.currentCustomer$\r\n        .pipe(\r\n          filter((response) => !!response),\r\n          switchMap((response) =>\r\n            this.dictionaryService.getProducts(response?.DatosPersonales?.mail)\r\n          )\r\n        )\r\n        .subscribe((products) => {\r\n          this.allProductsList = products.productList;\r\n        })\r\n    );\r\n  }\r\n\r\n  private getProducts() {\r\n    this.subs.add(\r\n      this.dictionaryService.getProducts().subscribe((products) => {\r\n        this.productsList = products.productList;\r\n      })\r\n    );\r\n  }\r\n\r\n  private setLocationStream() {\r\n    const postalCode = this.caseForm.get(FORM_CASE.POSTAL_CODE);\r\n\r\n    return postalCode.valueChanges.pipe(\r\n      startWith(postalCode.value),\r\n      filter(() => postalCode.valid && postalCode.value !== null),\r\n      switchMap((value: string) => this.dictionaryService.getLocation(value))\r\n    );\r\n  }\r\n\r\n  private cleanLocationCodeWhenPostalCodeChange() {\r\n    this.caseForm.get(FORM_CASE.POSTAL_CODE).valueChanges.subscribe((value) => {\r\n      if (this.caseForm.get(FORM_CASE.LOCATION_CODE).value) {\r\n        this.caseForm.get(FORM_CASE.LOCATION_CODE).setValue(null);\r\n        this.caseForm.get(FORM_CASE.LOCATION_CODE).updateValueAndValidity();\r\n      }\r\n    });\r\n  }\r\n\r\n  onSubmitForm() {\r\n    this.formSubmit = true;\r\n    if (this.caseForm.valid) {\r\n      const body: CasePayload = this.builBodyRequest(this.caseForm);\r\n      if (body) {\r\n        const caseList = { caseList: [body] };\r\n        this.subs.add(\r\n          this.caseService.createCase(caseList).subscribe(\r\n            (result) => {\r\n              this.showSuccessModal(this.modalSucces);\r\n              this.resetForm();\r\n              this.getCases();\r\n            },\r\n            (error) => {\r\n              this.errorHandler.showError(error);\r\n            }\r\n          )\r\n        );\r\n      }\r\n    }\r\n  }\r\n\r\n  private builBodyRequest(f: FormGroup): CasePayload {\r\n    const body = new CasePayload();\r\n    body.type = f.controls[FORM_CASE.CATEGORY].value;\r\n    body.recordTypeDeveloperName = f.controls[FORM_CASE.TYPE_CASE].value;\r\n    body.description = f.controls[FORM_CASE.COMENTS].value;\r\n    body.subject = f.controls[FORM_CASE.SUBJECT].value;\r\n    switch (f.controls.typeCase.value) {\r\n      case CASES.GEN_INFORMATION:\r\n      case CASES.HIRING:\r\n        body.productExtId = f.controls[FORM_CASE.PRODUCT].value;\r\n        break;\r\n      case CASES.CONTRACTUAL_MODIF:\r\n        switch (f.controls[FORM_CASE.CATEGORY].value) {\r\n          case CASE_CONTRACTUAL_MODIF.NAME_AND_SURNAME:\r\n            body.newName = f.controls[FORM_CASE.NAME].value || null;\r\n            body.newLastName = f.controls[FORM_CASE.FIRST_SURNAME].value || null;\r\n            body.newSecondLastName = f.controls[FORM_CASE.SECONDARY_SURNAME].value || null;\r\n            break;\r\n          case CASE_CONTRACTUAL_MODIF.CONTACT_DETAILS_PHONE_MAIL:\r\n            body.newPhone = f.controls[FORM_CASE.PHONE].value || null;\r\n            body.newEmail = f.controls[FORM_CASE.EMAIL].value || null;\r\n            if (this.emailOrPhoneAtLeastOneError) {\r\n              return null;\r\n            }\r\n            break;\r\n          case CASE_CONTRACTUAL_MODIF.LABOR_DATA:\r\n            body.employmentStatus = f.controls[FORM_CASE.EMPLOYMENT_SITUATION].value || null;\r\n            body.CNOExtId = f.controls[FORM_CASE.CNO].value || null;\r\n            body.CNAEExtId = f.controls[FORM_CASE.CNAE].value || null;\r\n            body.freelanceStartDate =\r\n              formatDate(f.controls[FORM_CASE.FREELANCE_DATE_REGISTER].value, 'yyy-MM-dd', 'es') ||\r\n              null;\r\n            break;\r\n          case CASE_CONTRACTUAL_MODIF.ADDRESS_CHANGES:\r\n            body.addressType = f.controls[FORM_CASE.ADDRESS_TYPE].value || null;\r\n            body.streetType = f.controls[FORM_CASE.STREET_TYPE].value || null;\r\n            body.streetName = f.controls[FORM_CASE.STREET_NAME].value || null;\r\n            body.streetNumber = f.controls[FORM_CASE.STREET_NUMBER].value || null;\r\n            body.portal = f.controls[FORM_CASE.PORTAL].value || null;\r\n            body.floor = f.controls[FORM_CASE.FLOOR].value || null;\r\n            body.door = f.controls[FORM_CASE.DOOR].value || null;\r\n            body.postalCode = f.controls[FORM_CASE.POSTAL_CODE].value || null;\r\n            body.locationCode = f.controls[FORM_CASE.LOCATION_CODE].value || null;\r\n            body.provinceCode = body.postalCode.substr(0, 2);\r\n            break;\r\n          case CASE_CONTRACTUAL_MODIF.PRIVACY_POLICY_OR_CONSENTS:\r\n            body.allowCommercialCommunications =\r\n              f.controls[FORM_CASE.OFFER_COMUNICATIONS].value === 'SI' ? true : false;\r\n            body.allowTransferOfPersonalData =\r\n              f.controls[FORM_CASE.TRANSFER_DATA].value === 'SI' ? true : false;\r\n            break;\r\n          case CASE_CONTRACTUAL_MODIF.BANK_ACCOUNT_CHANGES:\r\n            body.newIBAN = f.controls[FORM_CASE.IBAN].value || null;\r\n            break;\r\n          default:\r\n            break;\r\n        }\r\n        break;\r\n      case CASES.DOCUMENTS:\r\n        body.document = f.controls[FORM_CASE.DOCUMENT_TYPE].value;\r\n        break;\r\n\r\n      case CASES.CANCELLATIONS:\r\n        body.newIBAN = f.controls[FORM_CASE.IBAN].value || null;\r\n        body.motive = f.controls[FORM_CASE.REASON_CANCELLATION].value || null;\r\n        if (f.controls[FORM_CASE.CATEGORY].value === CASE_CANCELLATIONS.CANCELLATION_OF_TAXATION) {\r\n          body.impositionNumber = f.controls[FORM_CASE.CANCELLATION_TAXATION].value || null;\r\n        }\r\n        break;\r\n\r\n      case CASES.CUSTOMER_AREA:\r\n        body.newIBAN = f.controls[FORM_CASE.IBAN].value || null;\r\n        break;\r\n\r\n      case CASES.CLAIMS:\r\n      default:\r\n        break;\r\n    }\r\n    return body;\r\n  }\r\n\r\n  private resetForm() {\r\n    this.caseForm.reset();\r\n    this.caseTypeSelected = null;\r\n    this.createForm();\r\n    this.formSubmit = false;\r\n  }\r\n\r\n  get isTypeCaseSelected() {\r\n    return false;\r\n  }\r\n\r\n  trackByCode(index: number, item: Cnogroupcnocnae) {\r\n    return index && item.code;\r\n  }\r\n\r\n  private listenEmploymentSituationChanges() {\r\n    const employmentSituation = this.caseForm.get(FORM_CASE.EMPLOYMENT_SITUATION);\r\n    const cnae = this.caseForm.get(FORM_CASE.CNAE);\r\n    const cno = this.caseForm.get(FORM_CASE.CNO);\r\n    this.subs.add(\r\n      employmentSituation.valueChanges.pipe(distinctUntilChanged()).subscribe((value: string) => {\r\n        if (value !== '01' && value !== '02') {\r\n          cnae.disable();\r\n          cno.disable();\r\n          cnae.setValue(null);\r\n          cno.setValue(null);\r\n        } else {\r\n          cnae.enable();\r\n          cno.enable();\r\n        }\r\n      })\r\n    );\r\n  }\r\n\r\n  private listenIbanChanges() {\r\n    const iban = this.caseForm.get(FORM_CASE.IBAN);\r\n    const prefix = 'ES';\r\n    this.subs.add(\r\n      iban.valueChanges\r\n        .pipe(\r\n          filter((value: string) => value?.length > 0 && !value.startsWith(prefix)),\r\n          delay(1)\r\n        )\r\n        .subscribe(() => {\r\n          this.caseForm.patchValue({ iban: prefix }, { emitEvent: false });\r\n        })\r\n    );\r\n  }\r\n\r\n  private createState() {\r\n    return combineLatest([\r\n      this.globalPositionService.globalPosition$,\r\n      this.globalPositionService.globalPosition$.pipe(findAccount()),\r\n      this.accountService.currentCustomer$,\r\n    ]).pipe(\r\n      map(([globalPosition, account, currentCustomer]) => ({\r\n        globalPosition,\r\n        account,\r\n        currentCustomer,\r\n      }))\r\n    );\r\n  }\r\n\r\n  private setStreamValues() {\r\n    this.employmentSituation$ = this.dictionaryService.getEmploymentStatus();\r\n    this.cno$ = this.dictionaryService.getCNO();\r\n    this.cnae$ = this.dictionaryService.getCNAE();\r\n  }\r\n\r\n  hasError(control: AbstractControl) {\r\n    return (control.touched && control.invalid) || (this.formSubmit && control.invalid);\r\n  }\r\n\r\n  showNewCasesMobile() {\r\n    this.newCaseMobile = !this.newCaseMobile;\r\n  }\r\n\r\n  showSuccessModal(template: TemplateRef<any>) {\r\n    this.modalRef = this.modalService.show(template);\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.globalPositionService.destroy();\r\n    this.subs.unsubscribe();\r\n  }\r\n}\r\n","import { SharedModule } from '@shared/shared.module';\r\nimport { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\n\r\nimport { CasesRoutingModule } from './cases-routing.module';\r\nimport { CasesComponent } from './cases.component';\r\nimport { CollapseCaseComponent } from './components/collapse-case/collapse-case.component';\r\nimport { FilterByClientTypePipe } from './pipes/filter-by-client-type.pipe';\r\n\r\n\r\n@NgModule({\r\n  declarations: [CasesComponent, CollapseCaseComponent, FilterByClientTypePipe],\r\n  imports: [\r\n    CommonModule,\r\n    CasesRoutingModule,\r\n    SharedModule\r\n  ]\r\n})\r\nexport class CasesModule { }\r\n"]}