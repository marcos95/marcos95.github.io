function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{X3zk:function(e,t,r){"use strict";r.r(t);var n,o,a=r("iInd"),s=r("mrSG"),i=r("quSY"),c=r("3Ym9"),l=r("rtiL"),u=r("a+Vh"),d=r("ByqI"),b=r("AytR"),p=r("8Y7J"),f=r("gqoz"),m=r("v98y"),h=r("LqlI"),v=r("s7LF"),g=r("SMdK"),_=r("xUwJ"),w=r("SVse"),R=r("TSSN"),S=function(e){return{error:e}},k=((n=function(){function e(t,r){_classCallCheck(this,e),this.formBuilder=t,this.externalLinks=r,this.invalidCredentials=!1,this.login=new p.n,this.recover=new p.n,this.submitted=!1}return _createClass(e,[{key:"ngOnInit",value:function(){this.createForm()}},{key:"onSubmitForm",value:function(){if(this.submitted=!0,this.form.valid){var e=this.form.value,t=e.username,r=e.password;this.login.emit({username:t,password:r})}}},{key:"hasError",value:function(e){return e.touched&&e.invalid}},{key:"createForm",value:function(){this.form=this.formBuilder.group({username:["",[v.r.required,g.a]],password:["",v.r.required]})}},{key:"recoverPasswInfo",value:function(){this.recover.emit(!0)}}]),e}()).\u0275fac=function(e){return new(e||n)(p.Mb(v.c),p.Mb(_.a))},n.\u0275cmp=p.Gb({type:n,selectors:[["app-login-form"]],inputs:{invalidCredentials:"invalidCredentials"},outputs:{login:"login",recover:"recover"},decls:30,vars:29,consts:[[3,"formGroup","submit"],[1,"group-input","input-text"],["for","username"],["type","text","id","username","maxlength","10","formControlName","username",3,"ngClass"],[1,"error-text"],[1,"ico-alert"],["for","password"],["href","javascript:;",3,"click"],["type","password","id","password","formControlName","password","maxlength","8",3,"ngClass"],[1,"group-button"],["type","submit",1,"btn--primary"],[1,"btn--secondary",3,"href"]],template:function(e,t){1&e&&(p.Sb(0,"form",0),p.ac("submit",(function(){return t.onSubmitForm()})),p.Sb(1,"div",1),p.Sb(2,"label",2),p.Ec(3),p.dc(4,"translate"),p.Rb(),p.Nb(5,"input",3),p.Sb(6,"p",4),p.Nb(7,"span",5),p.Ec(8),p.dc(9,"translate"),p.Rb(),p.Rb(),p.Sb(10,"div",1),p.Sb(11,"label",6),p.Ec(12),p.dc(13,"translate"),p.Sb(14,"a",7),p.ac("click",(function(){return t.recoverPasswInfo()})),p.Ec(15),p.dc(16,"translate"),p.Rb(),p.Rb(),p.Nb(17,"input",8),p.Sb(18,"p",4),p.Nb(19,"span",5),p.Ec(20),p.dc(21,"translate"),p.Rb(),p.Rb(),p.Sb(22,"div",9),p.Sb(23,"button",10),p.Ec(24),p.dc(25,"translate"),p.Rb(),p.Rb(),p.Sb(26,"div",9),p.Sb(27,"a",11),p.Ec(28),p.dc(29,"translate"),p.Rb(),p.Rb(),p.Rb()),2&e&&(p.jc("formGroup",t.form),p.Ab(3),p.Fc(p.ec(4,11,"login_label_dni")),p.Ab(2),p.jc("ngClass",p.nc(25,S,t.hasError(t.form.get("username")))),p.Ab(3),p.Gc("",p.ec(9,13,"login_label_error_user")," "),p.Ab(4),p.Gc(" ",p.ec(13,15,"login_password")," "),p.Ab(3),p.Fc(p.ec(16,17,"login_label_forgot")),p.Ab(2),p.jc("ngClass",p.nc(27,S,t.invalidCredentials)),p.Ab(3),p.Gc("",p.ec(21,19,"login_label_error_pass")," "),p.Ab(4),p.Fc(p.ec(25,21,"login_button_login")),p.Ab(3),p.jc("href",t.externalLinks.onboarding,p.yc),p.Ab(1),p.Fc(p.ec(29,23,"login_button_register")))},directives:[v.s,v.o,v.g,v.b,v.i,v.n,v.f,w.n],pipes:[R.d],encapsulation:2}),n),C=r("zcjR"),y=function(e){return{error:e}},M=((o=function(){function e(t){_classCallCheck(this,e),this.formBuilder=t,this.changePassword=new p.n,this.submitted=!1}return _createClass(e,[{key:"ngOnInit",value:function(){this.createForm()}},{key:"onSubmit",value:function(){this.submitted=!0,this.form.markAllAsTouched(),this.form.valid&&this.changePassword.emit(this.form.value.password)}},{key:"hasError",value:function(e){return e.touched&&e.invalid}},{key:"createForm",value:function(){this.form=this.formBuilder.group({password:["",[v.r.required,v.r.pattern(u.l)]],passwordConfirm:["",[v.r.required,v.r.pattern(u.l)]]},{validators:Object(u.k)("password","passwordConfirm")})}}]),e}()).\u0275fac=function(e){return new(e||o)(p.Mb(v.c))},o.\u0275cmp=p.Gb({type:o,selectors:[["app-activate-user-form"]],outputs:{changePassword:"changePassword"},decls:20,vars:22,consts:[[1,"max-size-form",3,"formGroup","submit"],[1,"modal__title"],[1,"group-input"],["for","password"],["type","password","id","password","formControlName","password","minlength","8","maxlength","8",3,"ngClass"],[1,"modal__text-info"],["for","passwordConfirm"],["type","password","id","passwordConfirm","formControlName","passwordConfirm","minlength","8","maxlength","8",3,"ngClass"],["type","submit",1,"modal__btn","btn--primary"]],template:function(e,t){1&e&&(p.Sb(0,"form",0),p.ac("submit",(function(){return t.onSubmit()})),p.Sb(1,"h2",1),p.Ec(2),p.dc(3,"translate"),p.Rb(),p.Sb(4,"div",2),p.Sb(5,"label",3),p.Ec(6),p.dc(7,"translate"),p.Rb(),p.Nb(8,"input",4),p.Sb(9,"p",5),p.Ec(10),p.dc(11,"translate"),p.Rb(),p.Rb(),p.Sb(12,"div",2),p.Sb(13,"label",6),p.Ec(14),p.dc(15,"translate"),p.Rb(),p.Nb(16,"input",7),p.Rb(),p.Sb(17,"button",8),p.Ec(18),p.dc(19,"translate"),p.Rb(),p.Rb()),2&e&&(p.jc("formGroup",t.form),p.Ab(2),p.Fc(p.ec(3,8,"activate_user_title")),p.Ab(4),p.Fc(p.ec(7,10,"activate_user_password")),p.Ab(2),p.jc("ngClass",p.nc(18,y,t.hasError(t.form.get("password")))),p.Ab(2),p.Fc(p.ec(11,12,"activate_user_password_format")),p.Ab(4),p.Fc(p.ec(15,14,"activate_user_password_confirm")),p.Ab(2),p.jc("ngClass",p.nc(20,y,t.hasError(t.form.get("passwordConfirm"))||t.hasError(t.form))),p.Ab(2),p.Gc(" ",p.ec(19,16,"activate_user_confirm_button")," "))},directives:[v.s,v.o,v.g,v.b,v.n,v.f,v.j,v.i,w.n],pipes:[R.d],encapsulation:2}),o),A=["otpModal"],E=["recoverModal"],j=["activateUserModal"];function x(e,t){if(1&e){var r=p.Tb();p.Sb(0,"div",10),p.Sb(1,"span",11),p.ac("click",(function(){return p.wc(r),p.cc().hideRecoverModal()})),p.Rb(),p.Sb(2,"h2",12),p.Ec(3),p.dc(4,"translate"),p.Rb(),p.Sb(5,"p",13),p.Ec(6),p.dc(7,"translate"),p.Rb(),p.Sb(8,"div",14),p.Nb(9,"p",15),p.dc(10,"translate"),p.Nb(11,"p",15),p.dc(12,"translate"),p.Sb(13,"p"),p.Ec(14),p.dc(15,"translate"),p.Rb(),p.Rb(),p.Sb(16,"button",16),p.ac("click",(function(){return p.wc(r),p.cc().hideRecoverModal()})),p.Ec(17),p.dc(18,"translate"),p.Rb(),p.Rb()}if(2&e){var n=p.cc();p.Ab(3),p.Fc(p.ec(4,6,"login_label_forgot")),p.Ab(3),p.Fc(p.ec(7,8,"forgot_password_modal_message_p1_web")),p.Ab(3),p.jc("innerHTML",p.fc(10,10,"forgot_password_modal_message_p2_web",n.customerSupport),p.xc),p.Ab(2),p.jc("innerHTML",p.fc(12,13,"forgot_password_modal_message_p3_web",n.customerSupport),p.xc),p.Ab(3),p.Gc(" ",p.fc(15,16,"forgot_password_modal_message_p4_web",n.customerSupport)," "),p.Ab(3),p.Gc(" ",p.ec(18,19,"generic_ok_button")," ")}}function N(e,t){if(1&e){var r=p.Tb();p.Sb(0,"app-otp-form",17),p.ac("send",(function(e){return p.wc(r),p.cc().onSendOtp(e)}))("repeat",(function(){return p.wc(r),p.cc().onRepeatOtp()}))("hide",(function(){return p.wc(r),p.cc().closeModal()})),p.Rb()}2&e&&p.jc("isLogin",!0)}function F(e,t){if(1&e){var r=p.Tb();p.Sb(0,"app-activate-user-form",18),p.ac("changePassword",(function(e){return p.wc(r),p.cc().onChangePassword(e)})),p.Rb()}}var O,T,P=[{path:"",component:(O=function(){function e(t,r,n,o,a,s){_classCallCheck(this,e),this.authService=t,this.router=r,this.errorHandler=n,this.modalService=o,this.storageService=a,this.customerSupport=s,this.invalidCredentials=!1,this.subs=new i.a,this.homeLink=b.a.applications.home}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"ngOnDestroy",value:function(){this.closeModal(),this.subs.unsubscribe()}},{key:"openModal",value:function(e){this.modalRef=this.modalService.show(e)}},{key:"closeModal",value:function(){this.modalRef&&this.modalRef.hide()}},{key:"login",value:function(e,t){var r,n,o;return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark((function a(){var s,i=this;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return this.credentials=e,a.next=3,Object(u.c)(null===(r=e)||void 0===r?void 0:r.password,u.b,u.a);case 3:s=a.sent,this.subs.add(this.authService.authenticate({username:null===(o=null===(n=e)||void 0===n?void 0:n.username)||void 0===o?void 0:o.toUpperCase(),password:s},t).subscribe((function(e){i.token=e.access_token,i.userBe=e.userBe,i.userBe?i.openModal(i.activateUserModal):i.saveTokenAndNavigate()}),(function(e){i.handleLoginError(e)})));case 5:case"end":return a.stop()}}),a,this)})))}},{key:"onChangePassword",value:function(e){return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var r,n=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(u.c)(e,u.b,u.a);case 2:r=t.sent,this.closeModal(),this.subs.add(this.authService.activate(this.userBe,r).subscribe((function(){n.saveTokenAndNavigate()}),(function(e){n.errorHandler.showError(e)})));case 4:case"end":return t.stop()}}),t,this)})))}},{key:"onSendOtp",value:function(e){this.closeModal(),this.login(this.credentials,e)}},{key:"onRepeatOtp",value:function(){this.login(this.credentials)}},{key:"saveTokenAndNavigate",value:function(){this.storageService.setItem(l.a.TOKEN,this.token),this.router.navigate([""])}},{key:"handleLoginError",value:function(e){switch(e.errorCode){case c.a.AUTH_ERROR_OTP_REQUIRED:this.openModal(this.otpModal);break;case c.a.AUTH_ERROR_BAD_REQUEST:this.invalidCredentials=!0;break;default:this.errorHandler.showError(e)}}},{key:"showRecoverModal",value:function(){this.modalRef=this.modalService.show(this.recoverModal)}},{key:"hideRecoverModal",value:function(){this.modalRef.hide()}}]),e}(),O.\u0275fac=function(e){return new(e||O)(p.Mb(f.a),p.Mb(a.d),p.Mb(m.a),p.Mb(h.b),p.Mb(l.b),p.Mb(d.a))},O.\u0275cmp=p.Gb({type:O,selectors:[["app-login"]],viewQuery:function(e,t){var r;1&e&&(p.Ic(A,!0),p.Ic(E,!0),p.Ic(j,!0)),2&e&&(p.sc(r=p.bc())&&(t.otpModal=r.first),p.sc(r=p.bc())&&(t.recoverModal=r.first),p.sc(r=p.bc())&&(t.activateUserModal=r.first))},decls:16,vars:5,consts:[[1,"login"],[1,"max-size"],[1,"login__header"],[3,"href"],["src","assets/img/renault-logo.svg","alt","logotipo renault bank",1,"logo-desktop"],[1,"max-size-login"],[3,"invalidCredentials","login","recover"],["recoverModal",""],["otpModal",""],["activateUserModal",""],[1,"max-size-form"],[1,"modal__close","ico-close",3,"click"],[1,"modal__title"],[1,"modal__text"],[1,"modal__contacts"],[3,"innerHTML"],["type","button",1,"modal__btn","btn--primary",3,"click"],[3,"isLogin","send","repeat","hide"],[3,"changePassword"]],template:function(e,t){1&e&&(p.Sb(0,"div",0),p.Sb(1,"div",1),p.Sb(2,"div",2),p.Sb(3,"a",3),p.Sb(4,"h2"),p.Ec(5),p.dc(6,"translate"),p.Rb(),p.Rb(),p.Nb(7,"img",4),p.Rb(),p.Sb(8,"div",5),p.Sb(9,"app-login-form",6),p.ac("login",(function(e){return t.login(e)}))("recover",(function(){return t.showRecoverModal()})),p.Rb(),p.Rb(),p.Rb(),p.Rb(),p.Cc(10,x,19,21,"ng-template",null,7,p.Dc),p.Cc(12,N,1,1,"ng-template",null,8,p.Dc),p.Cc(14,F,1,0,"ng-template",null,9,p.Dc)),2&e&&(p.Ab(3),p.jc("href",t.homeLink,p.yc),p.Ab(2),p.Fc(p.ec(6,3,"toolbar_title_dashboard")),p.Ab(4),p.jc("invalidCredentials",t.invalidCredentials))},directives:[k,C.a,M],pipes:[R.d],encapsulation:2}),O)}],L=((T=function e(){_classCallCheck(this,e)}).\u0275mod=p.Kb({type:T}),T.\u0275inj=p.Jb({factory:function(e){return new(e||T)},imports:[[a.h.forChild(P)],a.h]}),T),G=r("PCNd");r.d(t,"LoginModule",(function(){return B}));var I,B=((I=function e(){_classCallCheck(this,e)}).\u0275mod=p.Kb({type:I}),I.\u0275inj=p.Jb({factory:function(e){return new(e||I)},imports:[[G.a,L]]}),I)}}]);