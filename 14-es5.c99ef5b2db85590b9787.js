function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{X3zk:function(e,t,r){"use strict";r.r(t);var n,o,a=r("tyNb"),s=r("mrSG"),i=r("quSY"),c=r("3Ym9"),l=r("rtiL"),u=r("a+Vh"),d=r("ByqI"),b=r("AytR"),f=r("fXoL"),p=r("gqoz"),m=r("v98y"),h=r("K3ix"),v=r("3Pt+"),g=r("SMdK"),_=r("xUwJ"),w=r("ofXK"),R=r("sYmb"),S=function(e){return{error:e}},k=((n=function(){function e(t,r){_classCallCheck(this,e),this.formBuilder=t,this.externalLinks=r,this.invalidCredentials=!1,this.login=new f.n,this.recover=new f.n,this.submitted=!1}return _createClass(e,[{key:"ngOnInit",value:function(){this.createForm()}},{key:"onSubmitForm",value:function(){if(this.submitted=!0,this.form.valid){var e=this.form.value,t=e.username,r=e.password;this.login.emit({username:t,password:r})}}},{key:"hasError",value:function(e){return e.touched&&e.invalid}},{key:"createForm",value:function(){this.form=this.formBuilder.group({username:["",[v.r.required,g.a]],password:["",v.r.required]})}},{key:"recoverPasswInfo",value:function(){this.recover.emit(!0)}}]),e}()).\u0275fac=function(e){return new(e||n)(f.Mb(v.c),f.Mb(_.a))},n.\u0275cmp=f.Gb({type:n,selectors:[["app-login-form"]],inputs:{invalidCredentials:"invalidCredentials"},outputs:{login:"login",recover:"recover"},decls:30,vars:29,consts:[[3,"formGroup","submit"],[1,"group-input","input-text"],["for","username"],["type","text","id","username","maxlength","10","formControlName","username",3,"ngClass"],[1,"error-text"],[1,"ico-alert"],["for","password"],["href","javascript:;",3,"click"],["type","password","id","password","formControlName","password","maxlength","8",3,"ngClass"],[1,"group-button"],["type","submit",1,"btn--primary"],[1,"btn--secondary",3,"href"]],template:function(e,t){1&e&&(f.Sb(0,"form",0),f.ac("submit",(function(){return t.onSubmitForm()})),f.Sb(1,"div",1),f.Sb(2,"label",2),f.Ec(3),f.dc(4,"translate"),f.Rb(),f.Nb(5,"input",3),f.Sb(6,"p",4),f.Nb(7,"span",5),f.Ec(8),f.dc(9,"translate"),f.Rb(),f.Rb(),f.Sb(10,"div",1),f.Sb(11,"label",6),f.Ec(12),f.dc(13,"translate"),f.Sb(14,"a",7),f.ac("click",(function(){return t.recoverPasswInfo()})),f.Ec(15),f.dc(16,"translate"),f.Rb(),f.Rb(),f.Nb(17,"input",8),f.Sb(18,"p",4),f.Nb(19,"span",5),f.Ec(20),f.dc(21,"translate"),f.Rb(),f.Rb(),f.Sb(22,"div",9),f.Sb(23,"button",10),f.Ec(24),f.dc(25,"translate"),f.Rb(),f.Rb(),f.Sb(26,"div",9),f.Sb(27,"a",11),f.Ec(28),f.dc(29,"translate"),f.Rb(),f.Rb(),f.Rb()),2&e&&(f.jc("formGroup",t.form),f.Ab(3),f.Fc(f.ec(4,11,"login_label_dni")),f.Ab(2),f.jc("ngClass",f.nc(25,S,t.hasError(t.form.get("username")))),f.Ab(3),f.Gc("",f.ec(9,13,"login_label_error_user")," "),f.Ab(4),f.Gc(" ",f.ec(13,15,"login_password")," "),f.Ab(3),f.Fc(f.ec(16,17,"login_label_forgot")),f.Ab(2),f.jc("ngClass",f.nc(27,S,t.invalidCredentials)),f.Ab(3),f.Gc("",f.ec(21,19,"login_label_error_pass")," "),f.Ab(4),f.Fc(f.ec(25,21,"login_button_login")),f.Ab(3),f.jc("href",t.externalLinks.onboarding,f.yc),f.Ab(1),f.Fc(f.ec(29,23,"login_button_register")))},directives:[v.s,v.o,v.g,v.b,v.i,v.n,v.f,w.n],pipes:[R.d],encapsulation:2}),n),C=r("zcjR"),y=function(e){return{error:e}},M=((o=function(){function e(t){_classCallCheck(this,e),this.formBuilder=t,this.changePassword=new f.n,this.submitted=!1}return _createClass(e,[{key:"ngOnInit",value:function(){this.createForm()}},{key:"onSubmit",value:function(){this.submitted=!0,this.form.markAllAsTouched(),this.form.valid&&this.changePassword.emit(this.form.value.password)}},{key:"hasError",value:function(e){return e.touched&&e.invalid}},{key:"createForm",value:function(){this.form=this.formBuilder.group({password:["",[v.r.required,v.r.pattern(u.l)]],passwordConfirm:["",[v.r.required,v.r.pattern(u.l)]]},{validators:Object(u.k)("password","passwordConfirm")})}}]),e}()).\u0275fac=function(e){return new(e||o)(f.Mb(v.c))},o.\u0275cmp=f.Gb({type:o,selectors:[["app-activate-user-form"]],outputs:{changePassword:"changePassword"},decls:20,vars:22,consts:[[1,"max-size-form",3,"formGroup","submit"],[1,"modal__title"],[1,"group-input"],["for","password"],["type","password","id","password","formControlName","password","minlength","8","maxlength","8",3,"ngClass"],[1,"modal__text-info"],["for","passwordConfirm"],["type","password","id","passwordConfirm","formControlName","passwordConfirm","minlength","8","maxlength","8",3,"ngClass"],["type","submit",1,"modal__btn","btn--primary"]],template:function(e,t){1&e&&(f.Sb(0,"form",0),f.ac("submit",(function(){return t.onSubmit()})),f.Sb(1,"h2",1),f.Ec(2),f.dc(3,"translate"),f.Rb(),f.Sb(4,"div",2),f.Sb(5,"label",3),f.Ec(6),f.dc(7,"translate"),f.Rb(),f.Nb(8,"input",4),f.Sb(9,"p",5),f.Ec(10),f.dc(11,"translate"),f.Rb(),f.Rb(),f.Sb(12,"div",2),f.Sb(13,"label",6),f.Ec(14),f.dc(15,"translate"),f.Rb(),f.Nb(16,"input",7),f.Rb(),f.Sb(17,"button",8),f.Ec(18),f.dc(19,"translate"),f.Rb(),f.Rb()),2&e&&(f.jc("formGroup",t.form),f.Ab(2),f.Fc(f.ec(3,8,"activate_user_title")),f.Ab(4),f.Fc(f.ec(7,10,"activate_user_password")),f.Ab(2),f.jc("ngClass",f.nc(18,y,t.hasError(t.form.get("password")))),f.Ab(2),f.Fc(f.ec(11,12,"activate_user_password_format")),f.Ab(4),f.Fc(f.ec(15,14,"activate_user_password_confirm")),f.Ab(2),f.jc("ngClass",f.nc(20,y,t.hasError(t.form.get("passwordConfirm"))||t.hasError(t.form))),f.Ab(2),f.Gc(" ",f.ec(19,16,"activate_user_confirm_button")," "))},directives:[v.s,v.o,v.g,v.b,v.n,v.f,v.j,v.i,w.n],pipes:[R.d],encapsulation:2}),o),A=["otpModal"],E=["recoverModal"],j=["activateUserModal"];function x(e,t){if(1&e){var r=f.Tb();f.Sb(0,"div",10),f.Sb(1,"span",11),f.ac("click",(function(){return f.wc(r),f.cc().hideRecoverModal()})),f.Rb(),f.Sb(2,"h2",12),f.Ec(3),f.dc(4,"translate"),f.Rb(),f.Sb(5,"p",13),f.Ec(6),f.dc(7,"translate"),f.Rb(),f.Sb(8,"div",14),f.Nb(9,"p",15),f.dc(10,"translate"),f.Nb(11,"p",15),f.dc(12,"translate"),f.Sb(13,"p"),f.Ec(14),f.dc(15,"translate"),f.Rb(),f.Rb(),f.Sb(16,"button",16),f.ac("click",(function(){return f.wc(r),f.cc().hideRecoverModal()})),f.Ec(17),f.dc(18,"translate"),f.Rb(),f.Rb()}if(2&e){var n=f.cc();f.Ab(3),f.Fc(f.ec(4,6,"login_label_forgot")),f.Ab(3),f.Fc(f.ec(7,8,"forgot_password_modal_message_p1_web")),f.Ab(3),f.jc("innerHTML",f.fc(10,10,"forgot_password_modal_message_p2_web",n.customerSupport),f.xc),f.Ab(2),f.jc("innerHTML",f.fc(12,13,"forgot_password_modal_message_p3_web",n.customerSupport),f.xc),f.Ab(3),f.Gc(" ",f.fc(15,16,"forgot_password_modal_message_p4_web",n.customerSupport)," "),f.Ab(3),f.Gc(" ",f.ec(18,19,"generic_ok_button")," ")}}function N(e,t){if(1&e){var r=f.Tb();f.Sb(0,"app-otp-form",17),f.ac("send",(function(e){return f.wc(r),f.cc().onSendOtp(e)}))("repeat",(function(){return f.wc(r),f.cc().onRepeatOtp()}))("hide",(function(){return f.wc(r),f.cc().closeModal()})),f.Rb()}2&e&&f.jc("isLogin",!0)}function O(e,t){if(1&e){var r=f.Tb();f.Sb(0,"app-activate-user-form",18),f.ac("changePassword",(function(e){return f.wc(r),f.cc().onChangePassword(e)})),f.Rb()}}var F,P,T=[{path:"",component:(F=function(){function e(t,r,n,o,a,s){_classCallCheck(this,e),this.authService=t,this.router=r,this.errorHandler=n,this.modalService=o,this.storageService=a,this.customerSupport=s,this.invalidCredentials=!1,this.subs=new i.a,this.homeLink=b.a.applications.home}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"ngOnDestroy",value:function(){this.closeModal(),this.subs.unsubscribe()}},{key:"openModal",value:function(e){this.modalRef=this.modalService.show(e)}},{key:"closeModal",value:function(){this.modalRef&&this.modalRef.hide()}},{key:"login",value:function(e,t){var r,n,o;return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark((function a(){var s,i=this;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return this.credentials=e,a.next=3,Object(u.c)(null===(r=e)||void 0===r?void 0:r.password,u.b,u.a);case 3:s=a.sent,this.subs.add(this.authService.authenticate({username:null===(o=null===(n=e)||void 0===n?void 0:n.username)||void 0===o?void 0:o.toUpperCase(),password:s},t).subscribe((function(e){i.token=e.access_token,i.userBe=e.userBe,i.userBe?i.openModal(i.activateUserModal):i.saveTokenAndNavigate()}),(function(e){i.handleLoginError(e)})));case 5:case"end":return a.stop()}}),a,this)})))}},{key:"onChangePassword",value:function(e){return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var r,n=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(u.c)(e,u.b,u.a);case 2:r=t.sent,this.closeModal(),this.subs.add(this.authService.activate(this.userBe,r).subscribe((function(){n.saveTokenAndNavigate()}),(function(e){n.errorHandler.showError(e)})));case 4:case"end":return t.stop()}}),t,this)})))}},{key:"onSendOtp",value:function(e){this.closeModal(),this.login(this.credentials,e)}},{key:"onRepeatOtp",value:function(){this.login(this.credentials)}},{key:"saveTokenAndNavigate",value:function(){this.storageService.setItem(l.a.TOKEN,this.token),this.router.navigate([""])}},{key:"handleLoginError",value:function(e){switch(e.errorCode){case c.a.AUTH_ERROR_OTP_REQUIRED:this.openModal(this.otpModal);break;case c.a.AUTH_ERROR_BAD_REQUEST:this.invalidCredentials=!0;break;default:this.errorHandler.showError(e)}}},{key:"showRecoverModal",value:function(){this.modalRef=this.modalService.show(this.recoverModal)}},{key:"hideRecoverModal",value:function(){this.modalRef.hide()}}]),e}(),F.\u0275fac=function(e){return new(e||F)(f.Mb(p.a),f.Mb(a.d),f.Mb(m.a),f.Mb(h.b),f.Mb(l.b),f.Mb(d.a))},F.\u0275cmp=f.Gb({type:F,selectors:[["app-login"]],viewQuery:function(e,t){var r;1&e&&(f.Ic(A,!0),f.Ic(E,!0),f.Ic(j,!0)),2&e&&(f.sc(r=f.bc())&&(t.otpModal=r.first),f.sc(r=f.bc())&&(t.recoverModal=r.first),f.sc(r=f.bc())&&(t.activateUserModal=r.first))},decls:16,vars:5,consts:[[1,"login"],[1,"max-size"],[1,"login__header"],[3,"href"],["src","assets/img/renault-logo.svg","alt","logotipo renault bank",1,"logo-desktop"],[1,"max-size-login"],[3,"invalidCredentials","login","recover"],["recoverModal",""],["otpModal",""],["activateUserModal",""],[1,"max-size-form"],[1,"modal__close","ico-close",3,"click"],[1,"modal__title"],[1,"modal__text"],[1,"modal__contacts"],[3,"innerHTML"],["type","button",1,"modal__btn","btn--primary",3,"click"],[3,"isLogin","send","repeat","hide"],[3,"changePassword"]],template:function(e,t){1&e&&(f.Sb(0,"div",0),f.Sb(1,"div",1),f.Sb(2,"div",2),f.Sb(3,"a",3),f.Sb(4,"h2"),f.Ec(5),f.dc(6,"translate"),f.Rb(),f.Rb(),f.Nb(7,"img",4),f.Rb(),f.Sb(8,"div",5),f.Sb(9,"app-login-form",6),f.ac("login",(function(e){return t.login(e)}))("recover",(function(){return t.showRecoverModal()})),f.Rb(),f.Rb(),f.Rb(),f.Rb(),f.Cc(10,x,19,21,"ng-template",null,7,f.Dc),f.Cc(12,N,1,1,"ng-template",null,8,f.Dc),f.Cc(14,O,1,0,"ng-template",null,9,f.Dc)),2&e&&(f.Ab(3),f.jc("href",t.homeLink,f.yc),f.Ab(2),f.Fc(f.ec(6,3,"toolbar_title_dashboard")),f.Ab(4),f.jc("invalidCredentials",t.invalidCredentials))},directives:[k,C.a,M],pipes:[R.d],encapsulation:2}),F)}],G=((P=function e(){_classCallCheck(this,e)}).\u0275mod=f.Kb({type:P}),P.\u0275inj=f.Jb({factory:function(e){return new(e||P)},imports:[[a.h.forChild(T)],a.h]}),P),L=r("PCNd");r.d(t,"LoginModule",(function(){return B}));var I,B=((I=function e(){_classCallCheck(this,e)}).\u0275mod=f.Kb({type:I}),I.\u0275inj=f.Jb({factory:function(e){return new(e||I)},imports:[[L.a,G]]}),I)}}]);