(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{X3zk:function(e,t,r){"use strict";r.r(t);var o=r("tyNb"),s=r("mrSG"),a=r("quSY"),n=r("3Ym9"),i=r("rtiL"),c=r("a+Vh"),l=r("ByqI"),d=r("AytR"),b=r("fXoL"),u=r("gqoz"),p=r("v98y"),m=r("K3ix"),h=r("3Pt+"),f=r("SMdK"),v=r("xUwJ"),g=r("ofXK"),_=r("sYmb");const w=function(e){return{error:e}};let R=(()=>{class e{constructor(e,t){this.formBuilder=e,this.externalLinks=t,this.invalidCredentials=!1,this.login=new b.n,this.recover=new b.n,this.submitted=!1}ngOnInit(){this.createForm()}onSubmitForm(){if(this.submitted=!0,this.form.valid){const{username:e,password:t}=this.form.value;this.login.emit({username:e,password:t})}}hasError(e){return e.touched&&e.invalid}createForm(){this.form=this.formBuilder.group({username:["",[h.r.required,f.a]],password:["",h.r.required]})}recoverPasswInfo(){this.recover.emit(!0)}}return e.\u0275fac=function(t){return new(t||e)(b.Mb(h.c),b.Mb(v.a))},e.\u0275cmp=b.Gb({type:e,selectors:[["app-login-form"]],inputs:{invalidCredentials:"invalidCredentials"},outputs:{login:"login",recover:"recover"},decls:30,vars:29,consts:[[3,"formGroup","submit"],[1,"group-input","input-text"],["for","username"],["type","text","id","username","maxlength","10","formControlName","username",3,"ngClass"],[1,"error-text"],[1,"ico-alert"],["for","password"],["href","javascript:;",3,"click"],["type","password","id","password","formControlName","password","maxlength","8",3,"ngClass"],[1,"group-button"],["type","submit",1,"btn--primary"],[1,"btn--secondary",3,"href"]],template:function(e,t){1&e&&(b.Sb(0,"form",0),b.ac("submit",(function(){return t.onSubmitForm()})),b.Sb(1,"div",1),b.Sb(2,"label",2),b.Ec(3),b.dc(4,"translate"),b.Rb(),b.Nb(5,"input",3),b.Sb(6,"p",4),b.Nb(7,"span",5),b.Ec(8),b.dc(9,"translate"),b.Rb(),b.Rb(),b.Sb(10,"div",1),b.Sb(11,"label",6),b.Ec(12),b.dc(13,"translate"),b.Sb(14,"a",7),b.ac("click",(function(){return t.recoverPasswInfo()})),b.Ec(15),b.dc(16,"translate"),b.Rb(),b.Rb(),b.Nb(17,"input",8),b.Sb(18,"p",4),b.Nb(19,"span",5),b.Ec(20),b.dc(21,"translate"),b.Rb(),b.Rb(),b.Sb(22,"div",9),b.Sb(23,"button",10),b.Ec(24),b.dc(25,"translate"),b.Rb(),b.Rb(),b.Sb(26,"div",9),b.Sb(27,"a",11),b.Ec(28),b.dc(29,"translate"),b.Rb(),b.Rb(),b.Rb()),2&e&&(b.jc("formGroup",t.form),b.Ab(3),b.Fc(b.ec(4,11,"login_label_dni")),b.Ab(2),b.jc("ngClass",b.nc(25,w,t.hasError(t.form.get("username")))),b.Ab(3),b.Gc("",b.ec(9,13,"login_label_error_user")," "),b.Ab(4),b.Gc(" ",b.ec(13,15,"login_password")," "),b.Ab(3),b.Fc(b.ec(16,17,"login_label_forgot")),b.Ab(2),b.jc("ngClass",b.nc(27,w,t.invalidCredentials)),b.Ab(3),b.Gc("",b.ec(21,19,"login_label_error_pass")," "),b.Ab(4),b.Fc(b.ec(25,21,"login_button_login")),b.Ab(3),b.jc("href",t.externalLinks.onboarding,b.yc),b.Ab(1),b.Fc(b.ec(29,23,"login_button_register")))},directives:[h.s,h.o,h.g,h.b,h.i,h.n,h.f,g.n],pipes:[_.d],encapsulation:2}),e})();var S=r("zcjR");const M=function(e){return{error:e}};let C=(()=>{class e{constructor(e){this.formBuilder=e,this.changePassword=new b.n,this.submitted=!1}ngOnInit(){this.createForm()}onSubmit(){this.submitted=!0,this.form.markAllAsTouched(),this.form.valid&&this.changePassword.emit(this.form.value.password)}hasError(e){return e.touched&&e.invalid}createForm(){this.form=this.formBuilder.group({password:["",[h.r.required,h.r.pattern(c.l)]],passwordConfirm:["",[h.r.required,h.r.pattern(c.l)]]},{validators:Object(c.k)("password","passwordConfirm")})}}return e.\u0275fac=function(t){return new(t||e)(b.Mb(h.c))},e.\u0275cmp=b.Gb({type:e,selectors:[["app-activate-user-form"]],outputs:{changePassword:"changePassword"},decls:20,vars:22,consts:[[1,"max-size-form",3,"formGroup","submit"],[1,"modal__title"],[1,"group-input"],["for","password"],["type","password","id","password","formControlName","password","minlength","8","maxlength","8",3,"ngClass"],[1,"modal__text-info"],["for","passwordConfirm"],["type","password","id","passwordConfirm","formControlName","passwordConfirm","minlength","8","maxlength","8",3,"ngClass"],["type","submit",1,"modal__btn","btn--primary"]],template:function(e,t){1&e&&(b.Sb(0,"form",0),b.ac("submit",(function(){return t.onSubmit()})),b.Sb(1,"h2",1),b.Ec(2),b.dc(3,"translate"),b.Rb(),b.Sb(4,"div",2),b.Sb(5,"label",3),b.Ec(6),b.dc(7,"translate"),b.Rb(),b.Nb(8,"input",4),b.Sb(9,"p",5),b.Ec(10),b.dc(11,"translate"),b.Rb(),b.Rb(),b.Sb(12,"div",2),b.Sb(13,"label",6),b.Ec(14),b.dc(15,"translate"),b.Rb(),b.Nb(16,"input",7),b.Rb(),b.Sb(17,"button",8),b.Ec(18),b.dc(19,"translate"),b.Rb(),b.Rb()),2&e&&(b.jc("formGroup",t.form),b.Ab(2),b.Fc(b.ec(3,8,"activate_user_title")),b.Ab(4),b.Fc(b.ec(7,10,"activate_user_password")),b.Ab(2),b.jc("ngClass",b.nc(18,M,t.hasError(t.form.get("password")))),b.Ab(2),b.Fc(b.ec(11,12,"activate_user_password_format")),b.Ab(4),b.Fc(b.ec(15,14,"activate_user_password_confirm")),b.Ab(2),b.jc("ngClass",b.nc(20,M,t.hasError(t.form.get("passwordConfirm"))||t.hasError(t.form))),b.Ab(2),b.Gc(" ",b.ec(19,16,"activate_user_confirm_button")," "))},directives:[h.s,h.o,h.g,h.b,h.n,h.f,h.j,h.i,g.n],pipes:[_.d],encapsulation:2}),e})();const A=["otpModal"],E=["recoverModal"],y=["activateUserModal"];function k(e,t){if(1&e){const e=b.Tb();b.Sb(0,"div",10),b.Sb(1,"span",11),b.ac("click",(function(){return b.wc(e),b.cc().hideRecoverModal()})),b.Rb(),b.Sb(2,"h2",12),b.Ec(3),b.dc(4,"translate"),b.Rb(),b.Sb(5,"p",13),b.Ec(6),b.dc(7,"translate"),b.Rb(),b.Sb(8,"div",14),b.Nb(9,"p",15),b.dc(10,"translate"),b.Nb(11,"p",15),b.dc(12,"translate"),b.Sb(13,"p"),b.Ec(14),b.dc(15,"translate"),b.Rb(),b.Rb(),b.Sb(16,"button",16),b.ac("click",(function(){return b.wc(e),b.cc().hideRecoverModal()})),b.Ec(17),b.dc(18,"translate"),b.Rb(),b.Rb()}if(2&e){const e=b.cc();b.Ab(3),b.Fc(b.ec(4,6,"login_label_forgot")),b.Ab(3),b.Fc(b.ec(7,8,"forgot_password_modal_message_p1_web")),b.Ab(3),b.jc("innerHTML",b.fc(10,10,"forgot_password_modal_message_p2_web",e.customerSupport),b.xc),b.Ab(2),b.jc("innerHTML",b.fc(12,13,"forgot_password_modal_message_p3_web",e.customerSupport),b.xc),b.Ab(3),b.Gc(" ",b.fc(15,16,"forgot_password_modal_message_p4_web",e.customerSupport)," "),b.Ab(3),b.Gc(" ",b.ec(18,19,"generic_ok_button")," ")}}function j(e,t){if(1&e){const e=b.Tb();b.Sb(0,"app-otp-form",17),b.ac("send",(function(t){return b.wc(e),b.cc().onSendOtp(t)}))("repeat",(function(){return b.wc(e),b.cc().onRepeatOtp()}))("hide",(function(){return b.wc(e),b.cc().closeModal()})),b.Rb()}2&e&&b.jc("isLogin",!0)}function x(e,t){if(1&e){const e=b.Tb();b.Sb(0,"app-activate-user-form",18),b.ac("changePassword",(function(t){return b.wc(e),b.cc().onChangePassword(t)})),b.Rb()}}const N=[{path:"",component:(()=>{class e{constructor(e,t,r,o,s,n){this.authService=e,this.router=t,this.errorHandler=r,this.modalService=o,this.storageService=s,this.customerSupport=n,this.invalidCredentials=!1,this.subs=new a.a,this.homeLink=d.a.applications.home}ngOnInit(){}ngOnDestroy(){this.closeModal(),this.subs.unsubscribe()}openModal(e){this.modalRef=this.modalService.show(e)}closeModal(){this.modalRef&&this.modalRef.hide()}login(e,t){var r,o,a;return Object(s.a)(this,void 0,void 0,(function*(){this.credentials=e;const s=yield Object(c.c)(null===(r=e)||void 0===r?void 0:r.password,c.b,c.a);this.subs.add(this.authService.authenticate({username:null===(a=null===(o=e)||void 0===o?void 0:o.username)||void 0===a?void 0:a.toUpperCase(),password:s},t).subscribe(e=>{this.token=e.access_token,this.userBe=e.userBe,this.userBe?this.openModal(this.activateUserModal):this.saveTokenAndNavigate()},e=>{this.handleLoginError(e)}))}))}onChangePassword(e){return Object(s.a)(this,void 0,void 0,(function*(){const t=yield Object(c.c)(e,c.b,c.a);this.closeModal(),this.subs.add(this.authService.activate(this.userBe,t).subscribe(()=>{this.saveTokenAndNavigate()},e=>{this.errorHandler.showError(e)}))}))}onSendOtp(e){this.closeModal(),this.login(this.credentials,e)}onRepeatOtp(){this.login(this.credentials)}saveTokenAndNavigate(){this.storageService.setItem(i.a.TOKEN,this.token),this.router.navigate([""])}handleLoginError(e){switch(e.errorCode){case n.a.AUTH_ERROR_OTP_REQUIRED:this.openModal(this.otpModal);break;case n.a.AUTH_ERROR_BAD_REQUEST:this.invalidCredentials=!0;break;default:this.errorHandler.showError(e)}}showRecoverModal(){this.modalRef=this.modalService.show(this.recoverModal)}hideRecoverModal(){this.modalRef.hide()}}return e.\u0275fac=function(t){return new(t||e)(b.Mb(u.a),b.Mb(o.d),b.Mb(p.a),b.Mb(m.b),b.Mb(i.b),b.Mb(l.a))},e.\u0275cmp=b.Gb({type:e,selectors:[["app-login"]],viewQuery:function(e,t){var r;1&e&&(b.Ic(A,!0),b.Ic(E,!0),b.Ic(y,!0)),2&e&&(b.sc(r=b.bc())&&(t.otpModal=r.first),b.sc(r=b.bc())&&(t.recoverModal=r.first),b.sc(r=b.bc())&&(t.activateUserModal=r.first))},decls:16,vars:5,consts:[[1,"login"],[1,"max-size"],[1,"login__header"],[3,"href"],["src","assets/img/renault-logo.svg","alt","logotipo renault bank",1,"logo-desktop"],[1,"max-size-login"],[3,"invalidCredentials","login","recover"],["recoverModal",""],["otpModal",""],["activateUserModal",""],[1,"max-size-form"],[1,"modal__close","ico-close",3,"click"],[1,"modal__title"],[1,"modal__text"],[1,"modal__contacts"],[3,"innerHTML"],["type","button",1,"modal__btn","btn--primary",3,"click"],[3,"isLogin","send","repeat","hide"],[3,"changePassword"]],template:function(e,t){1&e&&(b.Sb(0,"div",0),b.Sb(1,"div",1),b.Sb(2,"div",2),b.Sb(3,"a",3),b.Sb(4,"h2"),b.Ec(5),b.dc(6,"translate"),b.Rb(),b.Rb(),b.Nb(7,"img",4),b.Rb(),b.Sb(8,"div",5),b.Sb(9,"app-login-form",6),b.ac("login",(function(e){return t.login(e)}))("recover",(function(){return t.showRecoverModal()})),b.Rb(),b.Rb(),b.Rb(),b.Rb(),b.Cc(10,k,19,21,"ng-template",null,7,b.Dc),b.Cc(12,j,1,1,"ng-template",null,8,b.Dc),b.Cc(14,x,1,0,"ng-template",null,9,b.Dc)),2&e&&(b.Ab(3),b.jc("href",t.homeLink,b.yc),b.Ab(2),b.Fc(b.ec(6,3,"toolbar_title_dashboard")),b.Ab(4),b.jc("invalidCredentials",t.invalidCredentials))},directives:[R,S.a,C],pipes:[_.d],encapsulation:2}),e})()}];let F=(()=>{class e{}return e.\u0275mod=b.Kb({type:e}),e.\u0275inj=b.Jb({factory:function(t){return new(t||e)},imports:[[o.h.forChild(N)],o.h]}),e})();var O=r("PCNd");r.d(t,"LoginModule",(function(){return T}));let T=(()=>{class e{}return e.\u0275mod=b.Kb({type:e}),e.\u0275inj=b.Jb({factory:function(t){return new(t||e)},imports:[[O.a,F]]}),e})()}}]);
//# sourceMappingURL=14-es2015.0f13b42dcbd665b98544.js.map