(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{ePPo:function(t,e,a){"use strict";a.r(e);var n=a("PCNd"),c=a("SVse"),o=a("s7LF"),i=a("wd/R"),s=a("quSY"),r=a("1uah"),b=a("lJxs"),d=a("eIep"),_=a("a+Vh"),l=a("3Ym9"),m=a("9H/N"),u=a("8Y7J"),p=a("2PZR"),h=a("ienR"),R=a("v98y"),E=a("LqlI"),S=a("AytR"),O=a("JIr8"),A=a("LRne"),v=a("IheW");let f=(()=>{class t{constructor(t,e){this.httpClient=t,this.errorHandlerService=e}getTransaction(t,e,a,n){let c=`${S.a.apiBasePath}${S.a.endpoints.trasactions.get}?acuerdo=${t}&fechaDesde=${e}&fechaHasta=${a}`;return n&&(c=`${c}&referenceOTP=${n}`),this.httpClient.get(c).pipe(Object(O.a)(t=>t.errorCode===l.a.MOV_NOT_FOUND?Object(A.a)({code:l.a.MOV_NOT_FOUND,data:[]}):this.errorHandlerService.redirectErrorPage(t)))}generateOtp(t){return this.httpClient.post(`${S.a.apiBasePath}${S.a.endpoints.trasactions.generateOtp}`,t)}validateOtp(t){return this.httpClient.put(`${S.a.apiBasePath}${S.a.endpoints.trasactions.validateOtp}`,t)}}return t.\u0275fac=function(e){return new(e||t)(u.Wb(v.b),u.Wb(R.a))},t.\u0275prov=u.Ib({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var I=a("0rpK"),C=a("YonX"),g=function(t){return t.ACUERDO="AC",t.APORTACION="AO",t.CHEQUE_PAGARE="CJ",t.CHEQUE_PROPIO="CP",t.EFECTO_COMERCIAL="EC",t.EFECTO_RECIBIDO="EJ",t.EMBARGO="EM",t.EXPEDIENTE_RECLAMACION="ER",t.FONDO_INVERSION="CV",t.IMPOSICION="IP",t.LIQUIDACION="HL",t.OPERACION_VALORES="VA",t.OPERACION_EXTRANJERO="XO",t.OPERACION_RENTA_FIJA="RF",t.OPERACION_DIVERSA="OP",t.OPERACION_REPO="RO",t.PENSIONES="PE",t.RECIBO_DOMICILIADO_RZ="RZ",t.RECIBO_DOMICILIADO_RB="RB",t.RECIBO_VENTANILLA="RV",t.REMESA="RM",t.RETRO_PENSIONES="TG",t.SUBVENCION="SV",t.TRANSFERENCIA_SEPA_TF="TF",t.TRANSFERENCIA_SEPA_TR="TR",t.TRASPASO="RQ",t.APUNTE="AF",t.APUNTE_MANUAL="AM",t.BOLETA_CUC="BQ",t.CARG_COMIS_C57_GRP="CG",t.CHEQUE_EXTRANJERO="XC",t.COMIS_TRASP_VAL="CT",t.DESINTER_INVERSIS="DI",t.DOCUMENTOS_VARIOS="DJ",t.FACT_CON="EG",t}({});const y=[{code:g.ACUERDO,name:"transaction_ac"},{code:g.APORTACION,name:"transaction_ao"},{code:g.CHEQUE_PAGARE,name:"transaction_cj"},{code:g.CHEQUE_PROPIO,name:"transaction_cp"},{code:g.EFECTO_COMERCIAL,name:"transaction_ec"},{code:g.EFECTO_RECIBIDO,name:"transaction_ej"},{code:g.EMBARGO,name:"transaction_em"},{code:g.EXPEDIENTE_RECLAMACION,name:"transaction_er"},{code:g.FONDO_INVERSION,name:"transaction_cv"},{code:g.IMPOSICION,name:"transaction_ip"},{code:g.LIQUIDACION,name:"transaction_hl"},{code:g.OPERACION_VALORES,name:"transaction_va"},{code:g.OPERACION_EXTRANJERO,name:"transaction_xo"},{code:g.OPERACION_RENTA_FIJA,name:"transaction_rf"},{code:g.OPERACION_DIVERSA,name:"transaction_op"},{code:g.OPERACION_REPO,name:"transaction_ro"},{code:g.PENSIONES,name:"transaction_pe"},{code:g.RECIBO_DOMICILIADO_RZ,name:"transaction_rz"},{code:g.RECIBO_DOMICILIADO_RB,name:"transaction_rb"},{code:g.RECIBO_VENTANILLA,name:"transaction_rv"},{code:g.REMESA,name:"transaction_rm"},{code:g.RETRO_PENSIONES,name:"transaction_tg"},{code:g.SUBVENCION,name:"transaction_sv"},{code:g.TRANSFERENCIA_SEPA_TF,name:"transaction_tf"},{code:g.TRANSFERENCIA_SEPA_TR,name:"transaction_tr"},{code:g.TRASPASO,name:"transaction_rq"},{code:g.APUNTE,name:"transaction_af"},{code:g.APUNTE_MANUAL,name:"transaction_am"},{code:g.BOLETA_CUC,name:"transaction_bq"},{code:g.CARG_COMIS_C57_GRP,name:"transaction_cg"},{code:g.CHEQUE_EXTRANJERO,name:"transaction_xc"},{code:g.COMIS_TRASP_VAL,name:"transaction_ct"},{code:g.DESINTER_INVERSIS,name:"transaction_di"},{code:g.DOCUMENTOS_VARIOS,name:"transaction_dj"},{code:g.FACT_CON,name:"transaction_eg"}],N=new u.q("MOVEMENTS_TYPE",{providedIn:"root",factory:()=>y});var P=a("TSSN");const T=function(t){return{"text-green":t}};let M=(()=>{class t{constructor(t){this.movementsType=t,this.isOpen=!1}ngOnInit(){}open(){this.isOpen=!this.isOpen}get description(){var t;return null===(t=this.movementsType.find(t=>t.code===this.movement.codigoOrigenApunte))||void 0===t?void 0:t.name}get getIcon(){let t=null;switch(this.movement.codigoOrigenApunte){case g.ACUERDO:case g.APORTACION:case g.CHEQUE_PAGARE:case g.CHEQUE_PROPIO:case g.CHEQUE_EXTRANJERO:case g.EFECTO_COMERCIAL:case g.EFECTO_RECIBIDO:case g.EMBARGO:case g.IMPOSICION:case g.RECIBO_DOMICILIADO_RZ:case g.RECIBO_DOMICILIADO_RB:case g.RECIBO_VENTANILLA:case g.REMESA:case g.RETRO_PENSIONES:case g.SUBVENCION:t="ico-euro";break;case g.LIQUIDACION:t="ico-refund";break;case g.TRANSFERENCIA_SEPA_TR:case g.TRASPASO:t="ico-transfer";break;case g.CARG_COMIS_C57_GRP:t="ico-percent";break;case g.COMIS_TRASP_VAL:t="ico-lightning";break;default:t="ico-bookmark"}return t}get isPositive(){return"H"===this.movement.signo}}return t.\u0275fac=function(e){return new(e||t)(u.Mb(N))},t.\u0275cmp=u.Gb({type:t,selectors:[["app-transaction-item"]],inputs:{movement:"movement"},decls:33,vars:32,consts:[[1,"table__body__row"],[1,"table__body__title",3,"click"],[1,"table__body__title__group"],[1,"table__body__title__group__col"],[1,"table__body__title__group__col",3,"ngClass"],[1,"table__body__detail",3,"hidden"],[1,"table__body__detail__row"]],template:function(t,e){1&t&&(u.Sb(0,"div",0),u.Sb(1,"div",1),u.ac("click",(function(){return e.open()})),u.Sb(2,"div",2),u.Sb(3,"p",3),u.Ec(4),u.dc(5,"date"),u.Rb(),u.Rb(),u.Sb(6,"div",2),u.Nb(7,"p",3),u.Rb(),u.Sb(8,"div",2),u.Sb(9,"p",3),u.Ec(10),u.dc(11,"translate"),u.Rb(),u.Rb(),u.Sb(12,"div",2),u.Sb(13,"p",4),u.Ec(14),u.dc(15,"currency"),u.Rb(),u.Sb(16,"p",3),u.Ec(17),u.dc(18,"currency"),u.Rb(),u.Rb(),u.Rb(),u.Sb(19,"div",5),u.Sb(20,"div",6),u.Sb(21,"p"),u.Ec(22),u.dc(23,"translate"),u.Rb(),u.Sb(24,"p"),u.Ec(25),u.dc(26,"date"),u.Rb(),u.Rb(),u.Sb(27,"div",6),u.Sb(28,"p"),u.Ec(29),u.dc(30,"translate"),u.Rb(),u.Sb(31,"p"),u.Ec(32),u.Rb(),u.Rb(),u.Rb(),u.Rb()),2&t&&(u.Ab(4),u.Gc(" ",u.fc(5,12,e.movement.fechaOperacion,"dd/MM/yyyy")," "),u.Ab(3),u.Cb(e.getIcon),u.Ab(3),u.Gc(" ",u.ec(11,15,e.description)," "),u.Ab(3),u.jc("ngClass",u.nc(30,T,e.isPositive)),u.Ab(1),u.Gc(" ",u.fc(15,17,e.movement.importeApunte,"\u20ac")," "),u.Ab(3),u.Fc(u.fc(18,20,e.movement.saldoArrastre,"\u20ac")),u.Ab(2),u.jc("hidden",!e.isOpen),u.Ab(3),u.Gc("",u.ec(23,23,"transaction_value_date"),":"),u.Ab(3),u.Fc(u.fc(26,25,e.movement.fechaValor,"dd/MM/yyyy")),u.Ab(4),u.Gc("",u.ec(30,28,"transaction_concept"),":"),u.Ab(3),u.Fc(e.movement.textoRemitente))},directives:[c.n],pipes:[c.f,P.d,c.d],styles:[".text-green[_ngcontent-%COMP%]{color:#59a618}"]}),t})();var F=a("zcjR"),D=a("tepA"),L=a("nxmR"),B=a("kktJ");const k=["otpModal"];function j(t,e){1&t&&u.Nb(0,"app-transaction-item",35),2&t&&u.jc("movement",e.$implicit)}function w(t,e){if(1&t&&(u.Sb(0,"div",32),u.Sb(1,"p",33),u.Ec(2),u.dc(3,"date"),u.Rb(),u.Cc(4,j,1,1,"app-transaction-item",34),u.Rb()),2&t){const t=e.$implicit;u.Ab(2),u.Gc(" ",u.fc(3,2,t.key,"dd/MM/yyyy")," "),u.Ab(2),u.jc("ngForOf",t.value)}}function G(t,e){if(1&t&&(u.Sb(0,"div",30),u.Cc(1,w,5,5,"div",31),u.dc(2,"sortBy"),u.dc(3,"keyvalue"),u.dc(4,"groupBy"),u.Rb()),2&t){const t=u.cc(3);u.Ab(1),u.jc("ngForOf",u.gc(2,2,u.ec(3,6,u.fc(4,8,t.movementsSearchList,"fechaOperacion")),"desc","key"))("ngForTrackBy",t.trackByDates)}}const U=function(t,e){return{dateFrom:t,dateTo:e}};function $(t,e){if(1&t&&(u.Sb(0,"div",30),u.Sb(1,"div",36),u.Sb(2,"p",37),u.Ec(3),u.dc(4,"translate"),u.Rb(),u.Rb(),u.Rb()),2&t){const t=u.cc(3);u.Ab(3),u.Gc(" ",u.fc(4,1,"transaction_movements_search_not_found",u.oc(4,U,t.formatCustomDate(t.f.dateFrom.value,"dd/MM/yyyy"),t.formatCustomDate(t.f.dateTo.value,"dd/MM/yyyy")))," ")}}const V=function(){return{dateInputFormat:"DD/MM/YYYY"}},H=function(t){return{error:t}};function x(t,e){if(1&t){const t=u.Tb();u.Sb(0,"div",4),u.Sb(1,"div",5),u.Sb(2,"div",6),u.Sb(3,"div",7),u.Sb(4,"div",8),u.Sb(5,"div",9),u.Sb(6,"h1"),u.Ec(7),u.dc(8,"translate"),u.Rb(),u.Sb(9,"p"),u.Ec(10),u.dc(11,"translate"),u.dc(12,"formatIban"),u.Rb(),u.Rb(),u.Rb(),u.Rb(),u.Sb(13,"div",10),u.Sb(14,"div",11),u.Sb(15,"h1"),u.Ec(16),u.dc(17,"currency"),u.Rb(),u.Sb(18,"p"),u.Ec(19),u.dc(20,"formatIban"),u.Rb(),u.Nb(21,"span",12),u.Rb(),u.Rb(),u.Rb(),u.Sb(22,"div",13),u.Sb(23,"form",14),u.ac("submit",(function(){return u.wc(t),u.cc(2).search()})),u.Sb(24,"div",15),u.Sb(25,"label",16),u.Ec(26),u.dc(27,"translate"),u.Rb(),u.Nb(28,"span",17),u.Nb(29,"input",18),u.dc(30,"translate"),u.Rb(),u.Sb(31,"div",15),u.Sb(32,"label",19),u.Ec(33),u.dc(34,"translate"),u.Rb(),u.Nb(35,"span",17),u.Nb(36,"input",20),u.dc(37,"translate"),u.Rb(),u.Sb(38,"div",21),u.Sb(39,"button",22),u.Ec(40),u.dc(41,"translate"),u.Rb(),u.Rb(),u.Sb(42,"div",23),u.Sb(43,"button",24),u.Ec(44),u.dc(45,"translate"),u.Rb(),u.Rb(),u.Rb(),u.Sb(46,"div",25),u.Sb(47,"div",26),u.Sb(48,"p"),u.Ec(49),u.dc(50,"translate"),u.Rb(),u.Sb(51,"p"),u.Ec(52),u.dc(53,"translate"),u.Rb(),u.Sb(54,"p"),u.Ec(55),u.dc(56,"translate"),u.Rb(),u.Sb(57,"p"),u.Ec(58),u.dc(59,"translate"),u.Rb(),u.Rb(),u.Cc(60,G,5,11,"div",27),u.Cc(61,$,5,7,"div",27),u.Rb(),u.Rb(),u.Rb(),u.Sb(62,"div",28),u.Nb(63,"app-aside-banner",29),u.Rb(),u.Rb()}if(2&t){const t=u.cc().ngIf,e=u.cc();u.Ab(7),u.Fc(u.ec(8,30,"Buscador de movimientos")),u.Ab(3),u.Hc(" ",u.ec(11,32,"transaction_save_account")," ",u.ec(12,34,t.account.IBAN)," "),u.Ab(6),u.Fc(u.ec(17,36,t.account.Balance)),u.Ab(3),u.Fc(u.ec(20,38,t.account.IBAN)),u.Ab(4),u.jc("formGroup",e.searchForm),u.Ab(3),u.Fc(u.ec(27,40,"transaction_date_from")),u.Ab(3),u.jc("minDate",e.minDateFrom)("maxDate",e.maxDateFrom)("bsConfig",u.mc(60,V))("placeholder",u.ec(30,42,"dd/mm/aaaa"))("ngClass",u.nc(61,H,e.hasError(e.searchForm.get("dateFrom"))))("dateCustomClasses",e.dateCustomClasses),u.Ab(4),u.Fc(u.ec(34,44,"transaction_date_to")),u.Ab(3),u.jc("minDate",e.minDateTo)("maxDate",e.maxDateTo)("bsConfig",u.mc(63,V))("placeholder",u.ec(37,46,"dd/mm/aaaa"))("ngClass",u.nc(64,H,e.hasError(e.searchForm.get("dateTo"))))("dateCustomClasses",e.dateCustomClasses),u.Ab(4),u.Gc(" ",u.ec(41,48,"transaction_btn_search")," "),u.Ab(4),u.Gc(" ",u.ec(45,50,"transaction_btn_search")," "),u.Ab(5),u.Fc(u.ec(50,52,"transaction_date")),u.Ab(3),u.Fc(u.ec(53,54,"transaction_description")),u.Ab(3),u.Fc(u.ec(56,56,"transaction_amount")),u.Ab(3),u.Fc(u.ec(59,58,"transaction_balance")),u.Ab(2),u.jc("ngIf",null==e.movementsSearchList?null:e.movementsSearchList.length),u.Ab(1),u.jc("ngIf",!(null!=e.movementsSearchList&&e.movementsSearchList.length)&&e.showMsgTableEmpty),u.Ab(1),u.jc("appBannerBackground",e.banners.transactions),u.Ab(1),u.jc("globalPosition",t.globalPosition)}}function J(t,e){if(1&t){const t=u.Tb();u.Sb(0,"app-otp-form",38),u.ac("hide",(function(){return u.wc(t),u.cc(2).closeModal()}))("send",(function(e){return u.wc(t),u.cc(2).validateOtp(e)}))("repeat",(function(){return u.wc(t),u.cc(2).generateOtp(!1)})),u.Rb()}if(2&t){const t=u.cc(2);u.jc("invalidCode",t.invalidMovimentsOtpCode)}}function Q(t,e){if(1&t&&(u.Qb(0),u.Sb(1,"div",1),u.Cc(2,x,64,66,"div",2),u.Rb(),u.Cc(3,J,1,1,"ng-template",null,3,u.Dc),u.Pb()),2&t){const t=e.ngIf;u.Ab(2),u.jc("ngIf",null==t?null:t.account)}}let Y=(()=>{class t{constructor(t,e,a,n,c,o,d){this.formBuilder=t,this.globalPositionService=e,this.bsLocaleService=a,this.errorHandler=n,this.modalService=c,this.transactionService=o,this.banners=d,this.subs=new s.a,this.state$=Object(r.a)(this.globalPositionService.globalPosition$,this.globalPositionService.globalPosition$.pipe(Object(_.d)()),this.globalPositionService.globalPosition$.pipe(Object(_.e)())).pipe(Object(b.a)(([t,e,a])=>({globalPosition:t,account:e,deposit:a}))),this.maxDateTo=new Date,this.minDateFrom=new Date(i().subtract(365,"days").format("L")),this.formSubmit=!1,this.invalidOtp=!1,i.locale("es");const l=new Date;this.dateCustomClasses=[{date:l,classes:[]}]}ngOnInit(){this.bsLocaleService.use("es"),this.createForm()}get maxDateFrom(){return this.f.dateTo.value?new Date(this.f.dateTo.value):new Date}get minDateTo(){return this.f.dateFrom.value?new Date(this.f.dateFrom.value):new Date(i().subtract(365,"days").format("L"))}createForm(){const t=new Date,e=new Date(`${t.getMonth()>0?t.getMonth():1}/${t.getDay()}/${t.getFullYear()}`);this.searchForm=this.formBuilder.group({dateFrom:[e,[o.r.required]],dateTo:[t,[o.r.required]]})}get f(){return this.searchForm.controls}search(){this.formSubmit=!0,this.searchForm.valid&&(this.currentSearch={acuerdo:this.acuerdo,fechaDesde:this.formatCustomDate(this.f.dateFrom.value),fechaHasta:this.formatCustomDate(this.f.dateTo.value)},this.makeSearch())}openModal(t){(!this.modalRef||this.modalRef&&!this.modalRef.content)&&(this.modalRef=this.modalService.show(t))}formatCustomDate(t,e){return Object(c.z)(t,e||"yyyy-MM-dd","es")}generateOtp(t){this.invalidMovimentsOtpCode=!1,this.subs.add(this.state$.pipe(Object(d.a)(t=>this.transactionService.generateOtp({iban:t.account.IBAN,dateFrom:this.currentSearch.fechaDesde,dateTo:this.currentSearch.fechaHasta}))).subscribe(({otpId:e})=>{this.otpId=e,t&&this.openModal(this.otpModal)},t=>{this.errorHandler.showError(t)}))}validateOtp(t){this.subs.add(this.state$.pipe(Object(d.a)(e=>this.transactionService.validateOtp({iban:e.account.IBAN,dateFrom:this.currentSearch.fechaDesde,dateTo:this.currentSearch.fechaHasta,otpId:this.otpId,secretKey:t}))).subscribe(({})=>{this.makeSearch(this.otpId),this.closeModal()},t=>{Object(_.j)(t)?this.invalidMovimentsOtpCode=!0:(this.errorHandler.showError(t),this.closeModal())}))}makeSearch(t){this.movementsSearchList=[],this.subs.add(this.state$.pipe(Object(d.a)(e=>this.transactionService.getTransaction(e.account.Acuerdo,this.currentSearch.fechaDesde,this.currentSearch.fechaHasta,t))).subscribe(t=>{if(t)switch(t.code){case"OK":case l.a.MOV_NOT_FOUND:this.movementsSearchList=t?t.data:[],this.showMsgTableEmpty=!0;break;case"FECHA_NO_VALIDA_REQUIERE_OTP":this.generateOtp(!0);break;case"NO_EXISTE_OTP":this.movementsSearchList=[],this.errorHandler.showError({errorCode:t.code});break;default:this.movementsSearchList=[]}},t=>{this.errorHandler.showError(t)}))}trackByDates(t){return t.date}closeModal(){this.modalRef.hide()}hasError(t){return this.formSubmit&&t.invalid}ngOnDestroy(){this.globalPositionService.destroy(),this.subs.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(u.Mb(o.c),u.Mb(p.a),u.Mb(h.d),u.Mb(R.a),u.Mb(E.b),u.Mb(f),u.Mb(m.a))},t.\u0275cmp=u.Gb({type:t,selectors:[["app-transaction-search"]],viewQuery:function(t,e){var a;1&t&&u.Ic(k,!0),2&t&&u.sc(a=u.bc())&&(e.otpModal=a.first)},decls:2,vars:3,consts:[[4,"ngIf"],[1,"max-size","transaction-search"],["class","main",4,"ngIf"],["otpModal",""],[1,"main"],[1,"main-col"],[1,"main__header"],[1,"main__header__desktop"],[1,"main__header__title"],[1,"main__header__title__col"],[1,"main__header__mobile"],[1,"main__header__mobile__col"],[1,"ico-search-1"],[1,"main__body"],[3,"formGroup","submit"],[1,"group-input","input-text"],["for","dateFrom"],[1,"ico-calendary","icon-input","yellow"],["id","dateFrom","type","text","bsDatepicker","","formControlName","dateFrom",3,"minDate","maxDate","bsConfig","placeholder","ngClass","dateCustomClasses"],["for","dateTo"],["id","dateTo","type","text","bsDatepicker","","formControlName","dateTo",3,"minDate","maxDate","bsConfig","placeholder","ngClass","dateCustomClasses"],[1,"group-button"],["type","submit",1,"btn--primary-small"],[1,"main__button"],["type","submit",1,"btn--primary"],[1,"table"],[1,"table__header"],["class","table__body",4,"ngIf"],[1,"aside-col",3,"appBannerBackground"],[3,"globalPosition"],[1,"table__body"],["class","table__body__section",4,"ngFor","ngForOf","ngForTrackBy"],[1,"table__body__section"],[1,"table__body__section__date"],[3,"movement",4,"ngFor","ngForOf"],[3,"movement"],[1,"table__body__title"],[1,"table__body__title__group__col"],[3,"invalidCode","hide","send","repeat"]],template:function(t,e){1&t&&(u.Cc(0,Q,5,1,"ng-container",0),u.dc(1,"async")),2&t&&u.jc("ngIf",u.ec(1,1,e.state$))},directives:[c.p,o.s,o.o,o.g,h.b,o.b,h.a,o.n,o.f,c.n,I.a,C.a,c.o,M,F.a],pipes:[c.b,P.d,D.a,c.d,L.a,c.i,B.a,c.f],styles:[""]}),t})();var X=a("iInd"),q=a("pLZG"),Z=a("vHNk");function z(t,e){1&t&&(u.Sb(0,"button",26),u.Ec(1),u.dc(2,"translate"),u.Rb()),2&t&&(u.Ab(1),u.Gc(" ",u.ec(2,1,"transaction_btn_deposit")," "))}function K(t,e){1&t&&u.Nb(0,"app-transaction-item",32),2&t&&u.jc("movement",e.$implicit)}function W(t,e){if(1&t&&(u.Sb(0,"div",29),u.Sb(1,"p",30),u.Ec(2),u.dc(3,"date"),u.Rb(),u.Cc(4,K,1,1,"app-transaction-item",31),u.Rb()),2&t){const t=e.$implicit;u.Ab(2),u.Gc(" ",u.fc(3,2,t.key,"dd/MM/yyyy")," "),u.Ab(2),u.jc("ngForOf",t.value)}}function tt(t,e){if(1&t&&(u.Sb(0,"div",27),u.Cc(1,W,5,5,"div",28),u.dc(2,"sortBy"),u.dc(3,"keyvalue"),u.dc(4,"groupBy"),u.Rb()),2&t){const t=u.cc(3);u.Ab(1),u.jc("ngForOf",u.gc(2,2,u.ec(3,6,u.fc(4,8,t.movementsList,"fechaOperacion")),"desc","key"))("ngForTrackBy",t.trackByDates)}}const et=function(t){return{days:t}};function at(t,e){if(1&t&&(u.Sb(0,"div",27),u.Sb(1,"div",33),u.Sb(2,"p",34),u.Ec(3),u.dc(4,"translate"),u.Rb(),u.Rb(),u.Rb()),2&t){const t=u.cc(3);u.Ab(3),u.Gc(" ",u.fc(4,1,"transaction_movements_last_month_not_found",u.nc(4,et,t.rangeDays))," ")}}function nt(t,e){if(1&t&&(u.Sb(0,"div",6),u.Sb(1,"div",7),u.Sb(2,"div",8),u.Sb(3,"div",9),u.Sb(4,"div",10),u.Sb(5,"div",11),u.Sb(6,"h1"),u.Ec(7),u.dc(8,"translate"),u.Rb(),u.Sb(9,"p"),u.Ec(10),u.dc(11,"formatIban"),u.Rb(),u.Rb(),u.Sb(12,"div",11),u.Sb(13,"p"),u.Ec(14),u.dc(15,"translate"),u.Rb(),u.Sb(16,"h1"),u.Ec(17),u.dc(18,"currency"),u.Rb(),u.Rb(),u.Rb(),u.Sb(19,"div",12),u.Cc(20,z,3,3,"button",13),u.Sb(21,"button",14),u.Ec(22),u.dc(23,"translate"),u.Rb(),u.Rb(),u.Rb(),u.Sb(24,"div",15),u.Sb(25,"div",16),u.Sb(26,"h1"),u.Ec(27),u.dc(28,"currency"),u.Rb(),u.Sb(29,"p"),u.Ec(30),u.dc(31,"formatIban"),u.Rb(),u.Nb(32,"span",17),u.Rb(),u.Rb(),u.Rb(),u.Sb(33,"div",18),u.Sb(34,"div",19),u.Sb(35,"div",20),u.Sb(36,"p"),u.Ec(37),u.dc(38,"translate"),u.Rb(),u.Sb(39,"p"),u.Ec(40),u.dc(41,"translate"),u.Rb(),u.Sb(42,"p"),u.Ec(43),u.dc(44,"translate"),u.Rb(),u.Sb(45,"p"),u.Ec(46),u.dc(47,"translate"),u.Rb(),u.Rb(),u.Cc(48,tt,5,11,"div",21),u.Cc(49,at,5,6,"div",21),u.Sb(50,"a",22),u.Nb(51,"span",23),u.Sb(52,"p"),u.Ec(53),u.dc(54,"uppercase"),u.dc(55,"translate"),u.Rb(),u.Rb(),u.Rb(),u.Rb(),u.Rb(),u.Sb(56,"div",24),u.Nb(57,"app-aside-banner",25),u.Rb(),u.Rb()),2&t){const t=u.cc().ngIf,e=u.cc();u.Ab(7),u.Fc(u.ec(8,19,"transaction_save_account")),u.Ab(3),u.Fc(u.ec(11,21,t.account.IBAN)),u.Ab(4),u.Fc(u.ec(15,23,"transaction_available_balance")),u.Ab(3),u.Fc(u.ec(18,25,t.account.Balance)),u.Ab(3),u.jc("ngIf",null==t?null:t.deposit),u.Ab(2),u.Gc(" ",u.ec(23,27,"transaction_btn_transfer")," "),u.Ab(5),u.Fc(u.ec(28,29,t.account.Balance)),u.Ab(3),u.Fc(u.ec(31,31,t.account.IBAN)),u.Ab(2),u.jc("routerLink","search"),u.Ab(5),u.Fc(u.ec(38,33,"transaction_date")),u.Ab(3),u.Fc(u.ec(41,35,"transaction_description")),u.Ab(3),u.Fc(u.ec(44,37,"transaction_amount")),u.Ab(3),u.Fc(u.ec(47,39,"transaction_balance")),u.Ab(2),u.jc("ngIf",null==e.movementsList?null:e.movementsList.length),u.Ab(1),u.jc("ngIf",!(null!=e.movementsList&&e.movementsList.length)&&e.showMsgTableEmpty),u.Ab(1),u.jc("routerLink","search"),u.Ab(3),u.Fc(u.ec(54,41,u.ec(55,43,"transaction_look_for_movements"))),u.Ab(3),u.jc("appBannerBackground",e.banners.transactions),u.Ab(1),u.jc("globalPosition",t.globalPosition)}}function ct(t,e){if(1&t&&(u.Qb(0),u.Sb(1,"div",1),u.Cc(2,nt,58,45,"div",2),u.Rb(),u.Sb(3,"div",3),u.Sb(4,"button",4),u.Ec(5),u.dc(6,"translate"),u.Rb(),u.Sb(7,"button",5),u.Ec(8),u.dc(9,"translate"),u.Rb(),u.Rb(),u.Pb()),2&t){const t=e.ngIf;u.Ab(2),u.jc("ngIf",null==t?null:t.account),u.Ab(3),u.Gc(" ",u.ec(6,3,"transaction_btn_transfer")," "),u.Ab(3),u.Gc(" ",u.ec(9,5,"transaction_btn_deposit")," ")}}const ot=[{path:"",component:(()=>{class t{constructor(t,e,a,n,c,o){this.headerService=t,this.globalPositionService=e,this.router=a,this.transactionService=n,this.errorHandler=c,this.banners=o,this.rangeDays=89,this.state$=Object(r.a)(this.globalPositionService.globalPosition$,this.globalPositionService.globalPosition$.pipe(Object(_.d)()),this.globalPositionService.globalPosition$.pipe(Object(_.e)())).pipe(Object(b.a)(([t,e,a])=>({globalPosition:t,account:e,deposit:a}))),this.movementsList=[],this.subs=new s.a}ngOnInit(){this.headerService.updateTitle("menu_accounts_web"),this.globalPositionService.fetchGlobalPosition();const t=i().subtract(this.rangeDays,"days").format("YYYY-MM-DD"),e=i().format("YYYY-MM-DD");this.subs.add(this.state$.pipe(Object(q.a)(t=>{var e;return!!(null===(e=t)||void 0===e?void 0:e.account)}),Object(d.a)(a=>{var n;return this.transactionService.getTransaction(null===(n=a)||void 0===n?void 0:n.account.Acuerdo,t,e)})).subscribe(t=>{var e;this.movementsList=null===(e=t)||void 0===e?void 0:e.data,this.showMsgTableEmpty=!0},t=>{this.errorHandler.showError(t)}))}openSearch(){this.router.navigate(["/search"])}trackByDates(t){return t.date}ngOnDestroy(){this.globalPositionService.destroy(),this.subs.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(u.Mb(Z.a),u.Mb(p.a),u.Mb(X.d),u.Mb(f),u.Mb(R.a),u.Mb(m.a))},t.\u0275cmp=u.Gb({type:t,selectors:[["app-transactions"]],decls:2,vars:3,consts:[[4,"ngIf"],[1,"max-size","transactions"],["class","main",4,"ngIf"],[1,"main__button","group-button"],["type","button","routerLink","../../transfer",1,"btn--secondary"],["type","button","routerLink","../../deposit/new-imposition",1,"btn--primary"],[1,"main"],[1,"main-col"],[1,"main__header"],[1,"main__header__desktop"],[1,"main__header__title"],[1,"main__header__title__col"],[1,"main__header__buttons"],["type","button","class","btn--primary-small","routerLink","../../deposit/new-imposition",4,"ngIf"],["type","button","routerLink","../../transfer",1,"btn--terciary-small"],[1,"main__header__mobile"],[1,"main__header__mobile__col"],[1,"ico-search-1",3,"routerLink"],[1,"main__body"],[1,"table"],[1,"table__header"],["class","table__body",4,"ngIf"],[1,"table__actions",3,"routerLink"],[1,"ico-search-1"],[1,"aside-col",3,"appBannerBackground"],[3,"globalPosition"],["type","button","routerLink","../../deposit/new-imposition",1,"btn--primary-small"],[1,"table__body"],["class","table__body__section",4,"ngFor","ngForOf","ngForTrackBy"],[1,"table__body__section"],[1,"table__body__section__date"],[3,"movement",4,"ngFor","ngForOf"],[3,"movement"],[1,"table__body__title"],[1,"table__body__title__group__col"]],template:function(t,e){1&t&&(u.Cc(0,ct,10,7,"ng-container",0),u.dc(1,"async")),2&t&&u.jc("ngIf",u.ec(1,1,e.state$))},directives:[c.p,X.e,X.g,I.a,C.a,c.o,M],pipes:[c.b,P.d,D.a,c.d,c.x,L.a,c.i,B.a,c.f],encapsulation:2}),t})()},{path:"search",component:Y}];let it=(()=>{class t{}return t.\u0275mod=u.Kb({type:t}),t.\u0275inj=u.Jb({factory:function(e){return new(e||t)},imports:[[X.h.forChild(ot)],X.h]}),t})();a.d(e,"TransactionsModule",(function(){return st}));let st=(()=>{class t{}return t.\u0275mod=u.Kb({type:t}),t.\u0275inj=u.Jb({factory:function(e){return new(e||t)},imports:[[c.c,it,n.a]]}),t})()}}]);